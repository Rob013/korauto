import{j as e}from"./ui-5CGx59HE.js";import{r as s}from"./vendor-Ce2S7JN_.js";import{u as r,b as a}from"./router-CrtsEgIx.js";import{s as t}from"./client-ClhMjqWB.js";import{c,u as i,C as o,e as n,f as l,b as m,B as u}from"./index-DXJv48IP.js";import{A as d}from"./arrow-left-nPPkI31a.js";import{C as f}from"./circle-check-big-CBL_LzJM.js";import{L as x}from"./loader-circle-Cz5GAv8d.js";import"./supabase-FBsvvB2P.js";import"./utils-DN5cgeP9.js";import"./query-D7el4M-V.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=c("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),p=()=>{const[c]=r(),p=a(),{toast:j}=i(),[g,b]=s.useState("loading"),[y,w]=s.useState("");return s.useEffect(()=>{(async()=>{try{const e=c.get("token"),s=c.get("type");if(!e||"signup"!==s)return b("error"),void w("Invalid confirmation link.");const{data:r,error:a}=await t.auth.verifyOtp({token_hash:e,type:"signup"});if(a)return b("error"),void w(a.message||"Failed to confirm email.");r.user?(b("success"),w("Your email has been confirmed successfully!"),j({title:"Email Confirmed! ðŸŽ‰",description:"Your account is now active. Welcome to KORAUTO!"}),setTimeout(()=>{p("/")},3e3)):(b("error"),w("Confirmation failed. Please try again."))}catch(e){b("error"),w("An unexpected error occurred. Please try again.")}})()},[c,p,j]),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(o,{className:"w-full max-w-md text-center",children:[e.jsxs(n,{className:"pb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:(()=>{switch(g){case"loading":return e.jsx(x,{className:"h-16 w-16 text-blue-500 animate-spin"});case"success":return e.jsx(f,{className:"h-16 w-16 text-green-500"});case"error":return e.jsx(h,{className:"h-16 w-16 text-red-500"})}})()}),e.jsx(l,{className:"text-2xl",children:(()=>{switch(g){case"loading":return"Confirming Your Email...";case"success":return"Email Confirmed!";case"error":return"Confirmation Failed"}})()}),e.jsx("p",{className:"text-muted-foreground",children:(()=>{switch(g){case"loading":return"Please wait while we verify your email address.";case"success":return"Your account is now active and ready to use.";case"error":return"We encountered an issue confirming your email."}})()})]}),e.jsxs(m,{className:"space-y-4",children:[y&&e.jsx("div",{className:"p-4 rounded-lg "+("success"===g?"bg-green-50 text-green-700 border border-green-200":"error"===g?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-200"),children:e.jsx("p",{className:"text-sm",children:y})}),"success"===g&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"You'll be redirected to the homepage in a few seconds..."}),e.jsx(u,{onClick:()=>p("/"),className:"w-full",children:"Continue to KORAUTO"})]}),"error"===g&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{onClick:()=>p("/auth"),className:"w-full",children:"Back to Sign Up"}),e.jsxs(u,{variant:"outline",onClick:()=>p("/"),className:"w-full",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Return to Homepage"]})]}),"loading"===g&&e.jsxs(u,{variant:"outline",onClick:()=>p("/"),className:"w-full",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),"Return to Homepage"]})]})]})})};export{p as default};
