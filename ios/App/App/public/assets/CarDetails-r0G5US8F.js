const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CarInspectionDiagram-FbbFeq7V.js","assets/ui-5CGx59HE.js","assets/vendor-Ce2S7JN_.js","assets/badge-CtAh7DWu.js","assets/index-DXJv48IP.js","assets/supabase-FBsvvB2P.js","assets/utils-DN5cgeP9.js","assets/query-D7el4M-V.js","assets/router-CrtsEgIx.js","assets/index-CQ5W8qV3.css","assets/InspectionRequestForm-BHntB-mo.js","assets/input-BjLg3enW.js","assets/label-CADau4dH.js","assets/ui-form-bTH_Yx3M.js","assets/client-ClhMjqWB.js","assets/analytics-DNqrEujd.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase-FBsvvB2P.js";import{j as s}from"./ui-5CGx59HE.js";import{r as a}from"./vendor-Ce2S7JN_.js";import{c as t,S as r,B as i,X as n,p as l,u as o,d,C as c,b as m}from"./index-DXJv48IP.js";import{B as x}from"./badge-CtAh7DWu.js";import{D as h,a as u,I as g,F as p,M as f}from"./InspectionRequestForm-BHntB-mo.js";import{C as j,a as b,u as v}from"./useImageSwipe-D5MjfpnV.js";import{s as N}from"./client-ClhMjqWB.js";import{u as y}from"./useCurrencyAPI-4V5PeEfF.js";import{a as w}from"./analytics-DNqrEujd.js";import{f as k}from"./fallbackData-DuQB7R-4.js";import{u as _}from"./useImagePreload-BhQVUTkH.js";import{c as S,b as C}from"./router-CrtsEgIx.js";import{A as M}from"./arrow-left-nPPkI31a.js";import{H as P}from"./heart-j_9DbFLM.js";import{C as z}from"./car-BxrBaIAr.js";import{S as I}from"./settings-CifkK-3H.js";import{C as K}from"./calendar-bSjTuHsD.js";import{G as A}from"./gauge-C77d0s-O.js";import{F as E,P as $}from"./palette-CnXSA3iB.js";import{C as T}from"./chevron-up-BDNiUINz.js";import{C as D}from"./chevron-down-CZttC9Jd.js";import{S as F}from"./shield-2CMa0t69.js";import{C as R}from"./cog-BSSg9uAk.js";import{C as L}from"./circle-check-big-CBL_LzJM.js";import{T as O}from"./triangle-alert-BjcC0IR7.js";import{U as q}from"./users-J01yfr8T.js";import{C as U}from"./clock-Bsx_Ypxj.js";import{P as B,M as V}from"./phone-hADAJvIR.js";import{M as G}from"./map-pin-k_93RLhL.js";import"./utils-DN5cgeP9.js";import"./query-D7el4M-V.js";import"./input-BjLg3enW.js";import"./label-CADau4dH.js";import"./ui-form-bTH_Yx3M.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=t("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]),H=t("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Q=t("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),W=t("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),X=t("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Z=t("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */a.memo(()=>s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"container-responsive py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx(r,{className:"h-8 w-32"}),s.jsx(r,{className:"h-8 w-24"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(r,{className:"h-[400px] w-full rounded-lg"}),s.jsx("div",{className:"flex space-x-2",children:[...Array(5)].map((e,a)=>s.jsx(r,{className:"h-16 w-16 rounded"},a))})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(r,{className:"h-8 w-3/4"}),s.jsx(r,{className:"h-6 w-1/2"}),s.jsx(r,{className:"h-10 w-1/3"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:[...Array(6)].map((e,a)=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(r,{className:"h-4 w-16"}),s.jsx(r,{className:"h-6 w-24"})]},a))}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(r,{className:"h-12 w-full"}),s.jsx(r,{className:"h-12 w-full"})]})]})]}),s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsx(r,{className:"h-64 w-full rounded-lg"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(r,{className:"h-32 w-full rounded-lg"}),s.jsx(r,{className:"h-32 w-full rounded-lg"})]})]})]})})).displayName="CarDetailsLoadingSkeleton";const Y=a.memo(({error:e,onRetry:a})=>s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4 p-8",children:[s.jsx("div",{className:"text-6xl",children:"ðŸš—"}),s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Car Details Unavailable"}),s.jsx("p",{className:"text-muted-foreground max-w-md",children:e}),a&&s.jsx("button",{onClick:a,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Try Again"})]})}));Y.displayName="CarDetailsErrorBoundary";const ee=a.memo(()=>s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"container-responsive py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-32"}),s.jsx("div",{className:"h-64 bg-muted rounded"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-32 bg-muted rounded"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-24 bg-muted rounded"})]})]})]})})}));ee.displayName="QuickLoadingState";const se=({src:e,alt:t,isOpen:r,onClose:l,images:o=[],currentIndex:d=0,onImageChange:c})=>{const[m,x]=a.useState(1),[g,p]=a.useState(0),f=()=>{x(1),p(0)},v=()=>{o.length>1&&c&&d>0&&(c(d-1),f())},N=()=>{o.length>1&&c&&d<o.length-1&&(c(d+1),f())},y=e=>{"ArrowLeft"===e.key&&v(),"ArrowRight"===e.key&&N(),"Escape"===e.key&&l()};return a.useEffect(()=>{if(r)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r,d]),s.jsx(h,{open:r,onOpenChange:l,children:s.jsx(u,{className:"max-w-[95vw] max-h-[95vh] p-0 bg-black/95 border-0",children:s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:[s.jsx(i,{variant:"ghost",size:"icon",onClick:l,className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",children:s.jsx(n,{className:"h-6 w-6"})}),o.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(i,{variant:"ghost",size:"icon",onClick:v,disabled:0===d,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-50 bg-black/50 hover:bg-black/70 text-white disabled:opacity-30",children:s.jsx(j,{className:"h-8 w-8"})}),s.jsx(i,{variant:"ghost",size:"icon",onClick:N,disabled:d===o.length-1,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-50 bg-black/50 hover:bg-black/70 text-white disabled:opacity-30",children:s.jsx(b,{className:"h-8 w-8"})})]}),s.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-50 flex gap-2 bg-black/50 rounded-lg p-2",children:[s.jsx(i,{variant:"ghost",size:"icon",onClick:()=>x(e=>Math.max(e-.2,.5)),className:"text-white hover:bg-white/20",children:s.jsx(Z,{className:"h-5 w-5"})}),s.jsx(i,{variant:"ghost",size:"icon",onClick:()=>x(e=>Math.min(e+.2,3)),className:"text-white hover:bg-white/20",children:s.jsx(X,{className:"h-5 w-5"})}),s.jsx(i,{variant:"ghost",size:"icon",onClick:()=>p(e=>e+90),className:"text-white hover:bg-white/20",children:s.jsx(Q,{className:"h-5 w-5"})}),s.jsx(i,{variant:"ghost",onClick:f,className:"text-white hover:bg-white/20 px-3",children:"Reset"})]}),s.jsx("img",{src:e,alt:t,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${m}) rotate(${g}deg)`}}),s.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-2 rounded flex flex-col gap-1 text-sm",children:[s.jsxs("div",{children:[Math.round(100*m),"%"]}),o.length>1&&s.jsxs("div",{children:[d+1," / ",o.length]})]})]})})})},ae=new Set,te=a.lazy(()=>e(()=>import("./CarInspectionDiagram-FbbFeq7V.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),re=a.memo(({options:e,features:t,safetyFeatures:r,comfortFeatures:n})=>{const[l,o]=a.useState(!1),[d,c]=a.useState(!1),[m,h]=a.useState(!1),[u,g]=a.useState(!1),[p,f]=a.useState(!1),[j,b]=a.useState(!1);return s.jsxs("div",{className:"overflow-hidden bg-gradient-to-br from-background to-muted/20 rounded-xl border border-border/40 backdrop-blur-sm shadow-lg",children:[s.jsxs(i,{onClick:()=>b(!j),variant:"ghost",className:"w-full justify-between p-4 h-auto group hover:bg-gradient-to-r hover:from-muted/20 hover:to-muted/10 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 group-hover:bg-primary/20 transition-colors",children:s.jsx(R,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"font-semibold text-foreground",children:"Pajisjet dhe Opsionet"})]}),s.jsx(D,{className:"h-5 w-5 text-muted-foreground transition-all duration-300 "+(j?"rotate-180 text-primary":"")})]}),j&&s.jsxs("div",{className:"px-4 pb-4 space-y-4 animate-fade-in",children:[e.standard&&e.standard.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Pajisje Standarde"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:(l?e.standard:e.standard.slice(0,6)).map((e,a)=>s.jsx(x,{variant:"secondary",className:"justify-center py-1.5 px-3 text-xs font-medium bg-primary/10 text-primary border-0 hover:bg-primary/20 transition-colors",children:e},a))}),e.standard.length>6&&s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>o(!l),className:"h-8 px-3 text-xs text-primary hover:bg-primary/10 font-medium",children:l?"MÃ« pak":`Shiko tÃ« gjitha (${e.standard.length-6} mÃ« shumÃ«)`})]}),e.choice&&e.choice.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-accent"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Pajisje Opsionale"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:(d?e.choice:e.choice.slice(0,6)).map((e,a)=>s.jsx(x,{variant:"outline",className:"justify-center py-1.5 px-3 text-xs font-medium bg-accent/10 text-accent-foreground border-accent/30 hover:bg-accent/20 transition-colors",children:e},a))}),e.choice.length>6&&s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>c(!d),className:"h-8 px-3 text-xs text-primary hover:bg-primary/10 font-medium",children:d?"MÃ« pak":`Shiko tÃ« gjitha (${e.choice.length-6} mÃ« shumÃ«)`})]}),e.tuning&&e.tuning.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-destructive"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Modifikimet"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:e.tuning.map((e,a)=>s.jsx(x,{variant:"destructive",className:"justify-center py-1.5 px-3 text-xs font-medium bg-destructive/10 text-destructive border-0 hover:bg-destructive/20 transition-colors",children:e},a))})]}),t&&t.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Karakteristika tÃ« PÃ«rgjithshme"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:(m?t:t.slice(0,6)).map((e,a)=>s.jsx(x,{variant:"outline",className:"justify-center py-1.5 px-3 text-xs font-medium bg-muted/10 text-muted-foreground border-muted/40 hover:bg-muted/20 transition-colors",children:e},a))}),t.length>6&&s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>h(!m),className:"h-8 px-3 text-xs text-primary hover:bg-primary/10 font-medium",children:m?"MÃ« pak":`Shiko tÃ« gjitha (${t.length-6} mÃ« shumÃ«)`})]}),r&&r.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-destructive"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Karakteristika tÃ« SigurisÃ«"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:(u?r:r.slice(0,6)).map((e,a)=>s.jsx(x,{variant:"outline",className:"justify-center py-1.5 px-3 text-xs font-medium bg-destructive/10 text-destructive border-destructive/30 hover:bg-destructive/20 transition-colors",children:e},a))}),r.length>6&&s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>g(!u),className:"h-8 px-3 text-xs text-primary hover:bg-primary/10 font-medium",children:u?"MÃ« pak":`Shiko tÃ« gjitha (${r.length-6} mÃ« shumÃ«)`})]}),n&&n.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary"}),s.jsx("h5",{className:"text-sm font-medium text-foreground",children:"Karakteristika tÃ« RehatisÃ«"})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:(p?n:n.slice(0,6)).map((e,a)=>s.jsx(x,{variant:"secondary",className:"justify-center py-1.5 px-3 text-xs font-medium bg-secondary/10 text-secondary-foreground border-0 hover:bg-secondary/20 transition-colors",children:e},a))}),n.length>6&&s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>f(!p),className:"h-8 px-3 text-xs text-primary hover:bg-primary/10 font-medium",children:p?"MÃ« pak":`Shiko tÃ« gjitha (${n.length-6} mÃ« shumÃ«)`})]})]})]})});re.displayName="EquipmentOptionsSection";const ie=a.memo(()=>{const{id:t}=S(),r=C(),{toast:n}=o(),{goBack:h,restorePageState:u,pageState:Q}=d(),{convertUSDtoEUR:X,processFloodDamageText:Z}=y(),[ie,ne]=a.useState(0),[le,oe]=a.useState(!1),[de,ce]=a.useState(!1),[me,xe]=a.useState(!1),[he,ue]=a.useState(!1),[ge,pe]=a.useState(!1),[fe,je]=a.useState(!1),be=a.useCallback((e,s)=>{const a=[];return e.transmission?.name&&a.push(`Transmisioni: ${e.transmission.name}`),e.fuel?.name&&a.push(`Karburanti: ${e.fuel.name}`),e.color?.name&&a.push(`Ngjyra: ${e.color.name}`),e.engine?.name&&a.push(`Motori: ${e.engine.name}`),e.cylinders&&a.push(`${e.cylinders} Cilindra`),e.drive_wheel?.name&&a.push(`TÃ«rheqje: ${e.drive_wheel.name}`),s?.keys_available&&a.push("Ã‡elÃ«sat tÃ« DisponueshÃ«m"),0===a.length?["Klimatizimi","Dritaret Elektrike","Mbyllja Qendrore","Frena ABS"]:a},[]),ve=a.useCallback((e,s)=>{const a=[];return s?.airbags&&a.push(`Sistemi i Airbag-Ã«ve: ${s.airbags}`),"automatic"===e.transmission?.name&&a.push("ABS Sistemi i FrÃ«nimit"),a.push("Sistemi i Stabilitetit Elektronik"),s?.keys_available&&a.push("Sistemi i SigurisÃ«"),a.length>0?a:["ABS Sistemi i FrÃ«nimit","Airbag Sistemi","Mbyllja Qendrore"]},[]),Ne=a.useCallback((e,s)=>{const a=[];return"automatic"===e.transmission?.name&&a.push("Transmisioni Automatik"),a.push("Klimatizimi"),a.push("Dritaret Elektrike"),a.push("Pasqyrat Elektrike"),a},[]),{car:ye,loading:we,error:ke,refetch:_e}=((e,s)=>{const[t,r]=a.useState(null),[i,n]=a.useState(!0),[l,o]=a.useState(null),{convertUSDtoEUR:d,getCarFeatures:c,getSafetyFeatures:m,getComfortFeatures:x}=s,h=a.useCallback(async()=>{if(!e||"string"!=typeof e||""===e.trim())return o("Invalid car identifier provided"),void n(!1);o(null),n(!0),performance.now();const s=new AbortController;try{const i=N.from("cars_cache").select("*").or(`id.eq."${e}",api_id.eq."${e}",lot_number.eq."${e}",id.ilike."${e}%",api_id.ilike."${e}%"`).maybeSingle(),l=fetch("https://qtyyiqimkysmjnaocswe.supabase.co/functions/v1/secure-cars-api",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF0eXlpcWlta3lzbWpuYW9jc3dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0MzkxMzQsImV4cCI6MjA2OTAxNTEzNH0.lyRCHiShhW4wrGHL3G7pK5JBUHNAtgSUQACVOBGRpL8"},body:JSON.stringify({endpoint:"search-lot",lotNumber:e}),signal:s.signal}),{data:h,error:u}=await Promise.race([i,new Promise((e,s)=>setTimeout(()=>s(new Error("Cache timeout")),3e3))]).catch(e=>({data:null,error:e}));if(!u&&h)try{const e="string"==typeof h.car_data?JSON.parse(h.car_data||"{}"):h.car_data||{},s="string"==typeof h.lot_data?JSON.parse(h.lot_data||"{}"):h.lot_data||{},a="string"==typeof h.images?JSON.parse(h.images||"[]"):h.images||[],t=h.price||s.buy_now||s.final_bid||25e3,i=d(Math.round(t+2200)),l={id:h.id,make:h.make||"Unknown",model:h.model||"Unknown",year:h.year||2020,price:i,image:a[0]||"/placeholder.svg",images:a||[],vin:h.vin||e.vin,mileage:h.mileage||(s.odometer?.km?`${s.odometer.km.toLocaleString()} km`:void 0),transmission:h.transmission||e.transmission?.name,fuel:h.fuel||e.fuel?.name,color:h.color||e.color?.name,condition:h.condition||s.condition?.name?.replace("run_and_drives","Good Condition"),lot:h.lot_number||s.lot,title:`${h.year} ${h.make} ${h.model}`,odometer:s.odometer,engine:e.engine,cylinders:e.cylinders,drive_wheel:e.drive_wheel,body_type:e.body_type,damage:s.damage,keys_available:s.keys_available,airbags:s.airbags,grade_iaai:s.grade_iaai,seller:s.seller,seller_type:s.seller_type,sale_date:s.sale_date,bid:s.bid,buy_now:s.buy_now,final_bid:s.final_bid,features:c(e,s),safety_features:m(e,s),comfort_features:x(e,s),performance_rating:4.5,popularity_score:85,insurance:s.insurance,insurance_v2:s.insurance_v2,location:s.location,inspect:s.inspect,details:s.details};return r(l),n(!1),performance.now(),void w(h.id||h.api_id,l)}catch(a){}try{const s=await Promise.race([l,new Promise((e,s)=>setTimeout(()=>s(new Error("Edge function timeout")),8e3))]);if(s.ok){const a=await s.json();if(a&&a.lots&&a.lots[0]){const s=a.lots[0],t=s.buy_now??s.final_bid??s.price??25e3,i=d(Math.round(t+2200)),l={id:a.id?.toString()||s.lot,make:a.manufacturer?.name||"Unknown",model:a.model?.name||"Unknown",year:a.year||2020,price:i,image:s.images?.normal?.[0]||s.images?.big?.[0],images:s.images?.normal||s.images?.big||[],vin:a.vin,mileage:s.odometer?.km?`${s.odometer.km.toLocaleString()} km`:void 0,transmission:a.transmission?.name,fuel:a.fuel?.name,color:a.color?.name,condition:s.condition?.name?.replace("run_and_drives","Good Condition"),lot:s.lot,title:s.title||a.title,odometer:s.odometer,engine:a.engine,cylinders:a.cylinders,drive_wheel:a.drive_wheel,body_type:a.body_type,damage:s.damage,keys_available:s.keys_available,airbags:s.airbags,grade_iaai:s.grade_iaai,seller:s.seller,seller_type:s.seller_type,sale_date:s.sale_date,bid:s.bid,buy_now:s.buy_now,final_bid:s.final_bid,features:c(a,s),safety_features:m(a,s),comfort_features:x(a,s),performance_rating:4.5,popularity_score:85,insurance:s.insurance,insurance_v2:s.insurance_v2,location:s.location,inspect:s.inspect,details:s.details};return r(l),n(!1),performance.now(),void w(a.id||e,l)}}}catch(t){}const g=k.find(s=>s.id===e||s.lot_number===e);if(g){const e=g.price||25e3,s=d(Math.round(e+2200)),a={id:g.id,make:g.manufacturer?.name||"Unknown",model:g.model?.name||"Unknown",year:g.year||2020,price:s,image:"/placeholder.svg",images:[],vin:g.vin,mileage:void 0,transmission:g.transmission?.name,fuel:g.fuel?.name,color:g.color?.name,condition:"Good Condition",lot:g.lot_number,title:g.title,features:g.features||[],safety_features:["ABS","Airbags","Stability Control"],comfort_features:["Air Conditioning","Power Windows"],performance_rating:4.5,popularity_score:85};return r(a),n(!1),void performance.now()}performance.now(),o("Car not found. This car may have been sold or removed."),n(!1)}catch(i){o("Failed to load car details. Please try again."),n(!1)}},[e,d,c,m,x]);return a.useEffect(()=>{h()},[h]),{car:t,loading:i,error:l,refetch:h}})(t,{convertUSDtoEUR:X,getCarFeatures:be,getSafetyFeatures:ve,getComfortFeatures:Ne});((s,t={})=>{const{enableImagePreloading:r=!0,preloadThumbnails:i=!0,enableCaching:n=!0}=t,o=a.useMemo(()=>{if(!s)return[];const e=[];return s.image&&e.push(s.image),s.images?.length&&e.push(...s.images.slice(0,3)),[...new Set(e)]},[s?.image,s?.images]);a.useEffect(()=>{if(!r||!o.length)return;performance.now();const e=o.map(async(e,s)=>{if(e&&!ae.has(e))try{if("requestIdleCallback"in window){const a=()=>{l(e,"image"),ae.add(e)};0===s?a():window.requestIdleCallback(a,{timeout:1e3})}else setTimeout(()=>{l(e,"image"),ae.add(e)},100*s)}catch(ke){}});Promise.allSettled(e).then(()=>{performance.now()})},[o,r]);const d=a.useCallback(()=>{s&&(s.make,s.model,s.year,"requestIdleCallback"in window&&window.requestIdleCallback(()=>{e(()=>import("./InspectionRequestForm-BHntB-mo.js").then(e=>e.b),__vite__mapDeps([10,4,1,2,5,6,7,8,9,11,12,13,14,15])).catch(()=>{}),l("https://wa.me/38348181116","prefetch")}))},[s?.make,s?.model,s?.year]),c=a.useCallback(()=>{if(s&&"undefined"!=typeof window)try{const e=performance.getEntriesByType("navigation")[0],a=e.loadEventEnd-e.fetchStart;a>0&&a<3e4&&"gtag"in window&&window.gtag("event","page_performance",{event_category:"performance",event_label:"car_details_load_time",value:Math.round(a),custom_parameters:{car_make:s.make,car_model:s.model,car_year:s.year}})}catch(ke){}},[s?.make,s?.model,s?.year]);a.useCallback(()=>{n&&ae.clear()},[n]);a.useEffect(()=>{if(s){d();const e=setTimeout(c,1e3);return()=>clearTimeout(e)}},[s,d,c]),ae.size})(ye,{enableImagePreloading:!0,preloadThumbnails:!0,enableCaching:!0}),a.useEffect(()=>{ye&&!ge&&(ye.details?.options||ye.insurance_v2||ye.details?.inspect_outer||ye.details?.inspect?.inner||ye.details?.insurance)&&(xe(!0),pe(!0))},[ye,ge]);const Se={"001":"Klimatizimi","002":"Dritaret Elektrike","003":"Mbyllja Qendrore","004":"Frena ABS","005":"Airbag Sistemi","006":"Radio/Sistemi Audio","007":"CD Player","008":"Bluetooth","009":"Navigacioni GPS","010":"Kamera e Prapme","011":"SensorÃ«t e Parkimit","012":"Kontrolli i Kursimit","013":"Sistemi Start/Stop","014":"Dritat LED","015":"Dritat Xenon","016":"Pasqyrat Elektrike","017":"Pasqyrat e Ngrohura","018":"Kontrolli Elektronik i Stabilitetit","019":"Sistemi KundÃ«r Bllokimit","020":"Kontrolli i Traksionit","021":"Distribimi Elektronik i ForcÃ«s sÃ« FrÃ«nimit","022":"Sistemi i Monitorimit tÃ« Presionit tÃ« Gomas","023":"Sistemi i ParalajmÃ«rimit tÃ« Largimit nga Korsia","024":"Kontrolli Adaptiv i Kursimit","025":"Sistemi i ParalajmÃ«rimit tÃ« Kolizionit","026":"FrÃ«nimi Emergjent Automatik","027":"Kontrolli i Bordit Elektronik","028":"Sistemi Keyless","029":"Filteri i Grimcave","030":"Sistemi i Kontrollit tÃ« Stabilitetit","031":"Rrota e RezervÃ«s","032":"Kompleti i RIPARIM tÃ« Gomas","033":"Kapaku i Motorit","034":"Spoiler i PrapÃ«m","035":"Rrota Alumini","036":"Rrota Ã‡eliku","037":"Sistemi i Ngrohjes sÃ« UlÃ«seve","038":"UlÃ«set e LÃ«kurÃ«s","039":"UlÃ«set e Tekstilit","040":"Kontrolli Elektrik i UlÃ«seve","041":"Dritaret me Tinte","042":"Sistemi i AlarmshmÃ«risÃ«","043":"Imobilizuesi","044":"Kopja e Ã‡elÃ«save","045":"Kontrolli i TemperaturÃ«s","046":"Ventilimi Automatik","047":"Sistemi i Pastrimit tÃ« Dritareve","048":"Sistemi i Ujit tÃ« Xhamit","049":"Defogger i PrapÃ«m","050":"Sistemi i NdriÃ§imit tÃ« BrendshÃ«m",1:"Klimatizimi",2:"Dritaret Elektrike",3:"Mbyllja Qendrore",4:"Frena ABS",5:"Airbag Sistemi",6:"Radio/Sistemi Audio",7:"CD Player",8:"Bluetooth",9:"Navigacioni GPS",10:"Kamera e Prapme",11:"SensorÃ«t e Parkimit",12:"Kontrolli i Kursimit",13:"Sistemi Start/Stop",14:"Dritat LED",15:"Dritat Xenon",16:"Pasqyrat Elektrike",17:"Pasqyrat e Ngrohura",18:"Kontrolli Elektronik i Stabilitetit",19:"Sistemi KundÃ«r Bllokimit",20:"Kontrolli i Traksionit"};a.useEffect(()=>{(async()=>{try{const{data:{session:e}}=await N.auth.getSession();if(e?.user){const{data:e}=await N.rpc("is_admin");ce(e||!1)}}catch(e){}})()},[]);const Ce=a.useCallback(()=>{const e=window.location.href,s=`PÃ«rshÃ«ndetje! Jam i interesuar pÃ«r ${ye?.year} ${ye?.make} ${ye?.model} (â‚¬${ye?.price.toLocaleString()}) - Kodi #${ye?.lot||t}. A mund tÃ« mÃ« jepni mÃ« shumÃ« informacion? ${e}`,a=`https://wa.me/38348181116?text=${encodeURIComponent(s)}`;window.open(a,"_blank")},[ye,t]),Me=a.useCallback(()=>{navigator.clipboard.writeText(window.location.href),n({title:"Link-u u kopjua",description:"Link-u i makinÃ«s u kopjua nÃ« clipboard",duration:3e3})},[n]),Pe=a.useMemo(()=>ye?.images?.length?ye.images:ye?.image?[ye.image]:[],[ye?.images,ye?.image]),{currentIndex:ze,containerRef:Ie,goToNext:Ke,goToPrevious:Ae,goToIndex:Ee}=v({images:Pe,onImageChange:e=>ne(e)});a.useEffect(()=>{ze!==ie&&Ee(ie)},[ie,ze,Ee]),a.useMemo(()=>ye?.images||[],[ye?.images]);const[$e,Te]=a.useState(!1),De=a.useCallback(()=>{Te(!$e),n({title:$e?"U hoq nga tÃ« preferuarat":"U shtua nÃ« tÃ« preferuarat",description:$e?"Makina u hoq nga lista juaj e tÃ« preferuarave":"Makina u shtua nÃ« listÃ«n tuaj tÃ« tÃ« preferuarave",duration:3e3})},[$e,n]);return _(ye?.image),we?s.jsx(ee,{}):ke||!ye?s.jsx(Y,{error:ke||"Makina qÃ« po kÃ«rkoni nuk mund tÃ« gjindet nÃ« bazÃ«n tonÃ« tÃ« tÃ« dhÃ«nave.",onRetry:_e}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:s.jsxs("div",{className:"container-responsive py-6 max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-6 md:mb-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsxs(i,{variant:"outline",onClick:()=>{Q&&Q.url?r(Q.url):h()},className:"flex-1 sm:flex-none shadow-sm border-2 hover:shadow-md transition-all h-10 px-4",children:[s.jsx(M,{className:"h-4 w-4 mr-2"}),"Kthehu te Makinat"]}),s.jsxs(i,{variant:"outline",onClick:()=>r("/"),className:"flex-1 sm:flex-none shadow-sm border-2 hover:shadow-md transition-all h-10 px-4",children:[s.jsx(M,{className:"h-4 w-4 mr-2"}),"Kryefaqja"]})]}),s.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[s.jsxs(i,{variant:"outline",size:"sm",onClick:De,className:"shadow-sm hover:shadow-md transition-all flex-1 sm:flex-none max-w-[120px] h-9",children:[s.jsx(P,{className:"h-4 w-4 mr-2 "+($e?"fill-red-500 text-red-500":"")}),s.jsx("span",{className:"text-sm",children:"PÃ«lqej"})]}),s.jsxs(i,{variant:"outline",size:"sm",onClick:Me,className:"shadow-sm hover:shadow-md transition-all flex-1 sm:flex-none max-w-[120px] h-9",children:[s.jsx(W,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm",children:"Ndaj"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 xl:col-span-3 space-y-4",children:[s.jsx(c,{className:"glass-card border-0 shadow-2xl overflow-hidden rounded-xl",children:s.jsx(m,{className:"p-0",children:s.jsxs("div",{ref:Ie,className:"relative h-[300px] sm:h-[400px] md:h-[500px] lg:h-[600px] xl:h-[700px] bg-gradient-to-br from-muted to-muted/50 overflow-hidden group cursor-pointer",onClick:()=>oe(!0),children:[Pe.length>0?s.jsx("img",{src:Pe[ie],alt:`${ye.year} ${ye.make} ${ye.model}`,className:"w-full h-full transition-transform duration-300 hover:scale-105 object-contain",onError:e=>{e.currentTarget.src="/placeholder.svg"},onLoad:()=>{}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(z,{className:"h-16 w-16 text-muted-foreground"})}),Pe.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(i,{variant:"ghost",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 p-0 hidden sm:flex z-10",onClick:e=>{e.stopPropagation(),Ae()},children:s.jsx(j,{className:"h-5 w-5"})}),s.jsx(i,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 p-0 hidden sm:flex z-10",onClick:e=>{e.stopPropagation(),Ke()},children:s.jsx(b,{className:"h-5 w-5"})})]}),Pe.length>1&&s.jsxs("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-sm px-2 py-1 rounded backdrop-blur-sm",children:[ie+1,"/",Pe.length]}),Pe.length>1&&s.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-white text-xs bg-black/50 px-2 py-1 rounded sm:hidden",children:"Swipe to see more photos"}),ye.lot&&s.jsxs(x,{className:"absolute top-2 right-2 bg-primary/90 backdrop-blur-sm text-primary-foreground px-2 py-1 text-xs font-medium shadow-lg",children:["Lot #",ye.lot]}),s.jsx("div",{className:"absolute bottom-2 right-2 bg-black/50 backdrop-blur-sm rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(J,{className:"h-3 w-3 text-white"})})]})})}),Pe.length>1&&s.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-12 xl:grid-cols-16 gap-2",children:Pe.slice(0,24).map((e,a)=>s.jsx("button",{onClick:()=>ne(a),"aria-label":`Shiko imazhin ${a+1} nga ${Pe.length}`,className:"relative h-12 sm:h-14 md:h-16 bg-muted rounded-md overflow-hidden border-2 transition-all duration-200 hover:scale-105 "+(ie===a?"border-primary shadow-md ring-2 ring-primary/50":"border-transparent hover:border-primary/50"),children:s.jsx("img",{src:e,alt:`View ${a+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder.svg"}})},a))}),s.jsx(c,{className:"glass-card border-0 shadow-xl rounded-xl",children:s.jsxs(m,{className:"p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center text-foreground",children:[s.jsx(I,{className:"h-5 w-5 mr-2 text-primary"}),"Specifikimet Teknike"]}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsxs("div",{className:"text-2xl font-bold text-primary",children:["â‚¬",ye.price.toLocaleString()]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"+350â‚¬ deri nÃ« PrishtinÃ«"})]}),s.jsx(g,{trigger:s.jsxs(i,{size:"default",variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-primary-foreground w-full sm:w-auto",children:[s.jsx(p,{className:"h-4 w-4 mr-2"}),"KÃ«rko Inspektim"]}),carId:ye.id,carMake:ye.make,carModel:ye.model,carYear:ye.year})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 dark:bg-black/10 backdrop-blur-sm border border-white/10 dark:border-white/5 rounded-lg hover:bg-white/10 dark:hover:bg-black/15 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Marka"})]}),s.jsxs("span",{className:"text-muted-foreground font-medium text-right",children:[ye.make," ",ye.model]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 dark:bg-black/10 backdrop-blur-sm border border-white/10 dark:border-white/5 rounded-lg hover:bg-white/10 dark:hover:bg-black/15 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Viti"})]}),s.jsx("span",{className:"text-muted-foreground font-medium",children:ye.year})]}),ye.mileage&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Kilometrazh"})]}),s.jsx("span",{className:"text-muted-foreground font-medium",children:ye.mileage})]}),ye.transmission&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Transmisioni"})]}),s.jsx("span",{className:"text-muted-foreground font-medium capitalize",children:ye.transmission})]}),ye.fuel&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Karburanti"})]}),s.jsx("span",{className:"text-muted-foreground font-medium capitalize",children:ye.fuel})]}),ye.color&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($,{className:"h-4 w-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"font-medium text-foreground",children:"Ngjyra"})]}),s.jsx("span",{className:"text-muted-foreground font-medium capitalize",children:ye.color})]})]})]})}),s.jsx(c,{className:"glass-panel border-0 shadow-2xl rounded-xl",children:s.jsxs(m,{className:"p-4 lg:p-6",children:[s.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[s.jsxs("h3",{className:"text-lg lg:text-xl font-bold flex items-center text-foreground",children:[s.jsx(H,{className:"h-5 w-5 lg:h-6 lg:w-6 mr-2 text-primary"}),"Informacione tÃ« Detajuara"]}),s.jsxs(i,{variant:"outline",size:"default",onClick:()=>{xe(!me)},className:"border-primary text-primary hover:bg-primary hover:text-primary-foreground w-full sm:w-auto",children:[me?s.jsxs(s.Fragment,{children:[s.jsx(T,{className:"h-4 w-4 mr-2"}),"Fshih Detajet"]}):s.jsxs(s.Fragment,{children:[s.jsx(D,{className:"h-4 w-4 mr-2"}),"Shiko Detajet"]}),!me&&s.jsxs("div",{className:"ml-2 flex gap-1",children:[ye.details?.options&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Equipment & Options available"}),ye.insurance_v2&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full",title:"Insurance report available"}),(ye.details?.inspect_outer||ye.details?.inspect?.inner)&&s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full",title:"Inspection data available"})]})]})]}),me&&s.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-2 duration-300",children:[(ye.insurance_v2||ye.inspect||ye.insurance)&&s.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[s.jsxs("h4",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[s.jsx(F,{className:"h-5 w-5"}),"Raporti i SigurisÃ« dhe Sigurimit"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[void 0!==ye.insurance_v2?.accidentCnt&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"Historia e Aksidenteve:"}),s.jsx(x,{variant:0===ye.insurance_v2.accidentCnt?"secondary":"destructive",children:0===ye.insurance_v2.accidentCnt?"E PastÃ«r":`${ye.insurance_v2.accidentCnt} aksidente`})]}),void 0!==ye.insurance_v2?.ownerChangeCnt&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"Ndryshime PronÃ«sie:"}),s.jsx("span",{className:"font-medium",children:ye.insurance_v2.ownerChangeCnt})]}),void 0!==ye.insurance_v2?.totalLossCnt&&ye.insurance_v2.totalLossCnt>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"Humbje Totale:"}),s.jsx(x,{variant:"destructive",children:ye.insurance_v2.totalLossCnt})]}),void 0!==ye.insurance_v2?.floodTotalLossCnt&&ye.insurance_v2.floodTotalLossCnt>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"demtime:"}),s.jsx(x,{variant:"destructive",children:ye.insurance_v2.floodTotalLossCnt})]})]})]}),ye.details&&s.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[s.jsxs("h4",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[s.jsx(z,{className:"h-5 w-5"}),"Detaje tÃ« VeturÃ«s"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[ye.details?.engine_volume&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("span",{className:"text-sm text-foreground font-medium",children:"VÃ«llimi i Motorit:"}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[ye.details.engine_volume,"cc"]})]}),ye.details?.seats_count&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("span",{className:"text-sm text-foreground font-medium",children:"Numri i Vendeve:"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:ye.details.seats_count})]}),ye.details?.badge&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("span",{className:"text-sm text-foreground font-medium",children:"Versioni:"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:ye.details.badge})]}),ye.details?.sell_type&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("span",{className:"text-sm text-foreground font-medium",children:"Lloji i Shitjes:"}),s.jsx("span",{className:"text-sm font-medium text-muted-foreground capitalize",children:ye.details.sell_type})]}),s.jsx("div",{className:"sm:col-span-2 mt-4",children:s.jsxs(i,{onClick:()=>{ue(!he)},className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",size:"lg",children:[he?"Fshih Raportin":"Raporti",!he&&s.jsxs("div",{className:"ml-2 flex gap-1",children:[ye.details?.inspect_outer&&s.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full",title:"Visual inspection data available"}),(ye.details?.inspect?.inner||ye.details?.insurance)&&s.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full",title:"Technical inspection data available"}),ye.insurance_v2?.accidents&&s.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full",title:"Accident history available"})]})]})})]})]}),he&&s.jsxs("div",{className:"space-y-4 p-4 lg:p-6 bg-card rounded-xl border border-border shadow-md",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(p,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h4",{className:"text-xl lg:text-2xl font-bold text-foreground mb-2",children:"Raporti i Inspektimit tÃ« PlotÃ«"}),s.jsx("p",{className:"text-muted-foreground text-sm lg:text-base max-w-xl mx-auto",children:"Analiza e detajuar profesionale e gjendjes sÃ« automjetit"})]}),s.jsxs("div",{className:"grid gap-4",children:[ye.details?.inspect?.inner&&s.jsxs("div",{className:"overflow-hidden bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200 inspection-section-black",children:[s.jsxs(i,{onClick:()=>je(!fe),variant:"ghost",className:"w-full p-3 md:p-4 h-auto group hover:bg-blue-100/50 transition-all duration-300",children:[s.jsxs("div",{className:"flex flex-col gap-2 w-full sm:hidden",children:[s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center group-hover:bg-blue-700 transition-colors flex-shrink-0",children:s.jsx(R,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"text-left min-w-0 flex-1",children:[s.jsx("h5",{className:"text-sm font-bold text-foreground inspection-text-black",children:"Motori dhe Sistemi Mekanik"}),s.jsx("p",{className:"text-muted-foreground text-xs inspection-subtext-black",children:"Kontrolli teknik i komponentÃ«ve kryesorÃ«"})]})]}),s.jsx(D,{className:"h-4 w-4 text-muted-foreground transition-all duration-300 flex-shrink-0 "+(fe?"rotate-180 text-primary":"")})]}),!fe&&s.jsx("div",{className:"flex items-center gap-2 justify-center",children:s.jsxs("div",{className:"flex gap-1",children:[Object.entries(ye.details?.inspect?.inner||{}).slice(0,3).map(([e,a],t)=>{const r="goodness"===a||"proper"===a||"doesn't exist"===a;return s.jsx("div",{className:"w-2 h-2 rounded-full "+(r?"bg-green-500":"bg-red-500"),title:`${e}: ${a}`},t)}),Object.entries(ye.details?.inspect?.inner||{}).length>3&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["+",Object.entries(ye.details?.inspect?.inner||{}).length-3]})]})})]}),s.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between sm:w-full",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center group-hover:bg-blue-700 transition-colors flex-shrink-0",children:s.jsx(R,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"text-left min-w-0 flex-1",children:[s.jsx("h5",{className:"text-base md:text-lg font-bold text-foreground inspection-text-black",children:"Motori dhe Sistemi Mekanik"}),s.jsx("p",{className:"text-muted-foreground text-xs inspection-subtext-black",children:"Kontrolli teknik i komponentÃ«ve kryesorÃ«"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!fe&&s.jsxs("div",{className:"flex gap-1",children:[Object.entries(ye.details?.inspect?.inner||{}).slice(0,3).map(([e,a],t)=>{const r="goodness"===a||"proper"===a||"doesn't exist"===a;return s.jsx("div",{className:"w-2 h-2 rounded-full "+(r?"bg-green-500":"bg-red-500"),title:`${e}: ${a}`},t)}),Object.entries(ye.details?.inspect?.inner||{}).length>3&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["+",Object.entries(ye.details?.inspect?.inner||{}).length-3]})]}),s.jsx(D,{className:"h-4 w-4 md:h-5 md:w-5 text-muted-foreground transition-all duration-300 "+(fe?"rotate-180 text-primary":"")})]})]})]}),fe&&s.jsx("div",{className:"px-3 pb-3 space-y-2 animate-fade-in",children:s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:Object.entries(ye.details?.inspect?.inner||{}).map(([e,a])=>{const t="goodness"===a||"proper"===a||"doesn't exist"===a,r=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-card rounded-lg border transition-all hover:shadow-sm "+(t?"border-green-200":"border-red-200"),children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 "+(t?"bg-green-500":"bg-red-500")}),s.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:r})]}),s.jsxs(x,{variant:t?"default":"destructive",className:"text-xs font-medium flex-shrink-0 ml-2 px-2 py-1 "+(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["goodness"===a&&"âœ“ MirÃ«","proper"===a&&"âœ“ Normal","doesn't exist"===a&&"âœ“ Pa Probleme",!["goodness","proper","doesn't exist"].includes(String(a))&&`âš  ${a}`]})]},e)})})})]}),ye.details?.insurance&&s.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 inspection-section-black",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:s.jsx(F,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-xl font-bold text-foreground",children:"Historia e SigurisÃ« dhe Sigurimit"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"TÃ« dhÃ«nat e sigurimit dhe aksidenteve"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ye.details?.insurance?.car_info&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-green-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(L,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Historia e Aksidenteve"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ye.details?.insurance?.car_info?.accident_history})]}),s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-green-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(I,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"riparime"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ye.details?.insurance?.car_info?.repair_count})]}),s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-green-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(O,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Humbje Totale"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ye.details?.insurance?.car_info?.total_loss})]}),s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-green-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(z,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"demtime"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Z(ye.details?.insurance?.car_info?.flood_damage)})]})]})})]}),ye.damage&&s.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 inspection-section-black",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center",children:s.jsx(O,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-xl font-bold text-foreground inspection-text-black",children:"Gjendja e Jashtme dhe KarocerisÃ«"}),s.jsx("p",{className:"text-muted-foreground text-sm inspection-subtext-black",children:"VlerÃ«simi i dÃ«mtimeve dhe riparime"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[ye.damage.main&&s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-orange-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(O,{className:"h-4 w-4 text-orange-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"DÃ«mtimi Kryesor"})]}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:ye.damage.main})]}),ye.damage.second&&s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-orange-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(O,{className:"h-4 w-4 text-orange-600"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"DÃ«mtimi DytÃ«sor"})]}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:ye.damage.second})]})]})]}),ye.details?.insurance?.owner_changes&&ye.details?.insurance?.owner_changes.length>0&&s.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 inspection-section-black",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:s.jsx(q,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-xl font-bold text-foreground",children:"Historia e PronarÃ«ve"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Ndryshimet e pronÃ«sisÃ« pÃ«rgjatÃ« kohÃ«s"})]})]}),s.jsx("div",{className:"space-y-3",children:ye.details?.insurance?.owner_changes?.map((e,a)=>s.jsx("div",{className:"p-4 bg-card rounded-lg border border-purple-500/20 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-foreground",children:e.change_type}),e.usage_type&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Lloji: ",e.usage_type]})]})]}),s.jsx("span",{className:"text-xs text-muted-foreground bg-purple-50 dark:bg-purple-900/30 px-2 py-1 rounded",children:e.date})]})},a))})]}),ye.details?.inspect_outer&&ye.details?.inspect_outer.length>0&&s.jsxs("div",{className:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-200 inspection-section-black",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-lg flex items-center justify-center",children:s.jsx(z,{className:"h-5 w-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-lg font-bold text-foreground",children:"Diagrami i Inspektimit tÃ« Automjetit"}),s.jsx("p",{className:"text-muted-foreground text-xs inspection-subtext-black",children:"Gjendja vizuale e pjesÃ«ve tÃ« jashtme"})]})]}),s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"h-48 bg-muted/20 rounded-lg animate-pulse flex items-center justify-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading inspection diagram..."})}),children:s.jsx(te,{inspectionData:ye.details?.inspect_outer,className:"mt-3"})})]}),ye.details?.maintenance_history&&ye.details?.maintenance_history.length>0&&s.jsxs("div",{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 inspection-section-black",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-yellow-600 rounded-lg flex items-center justify-center",children:s.jsx(U,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-xl font-bold text-foreground",children:"Historia e MirÃ«mbajtjes"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"ShÃ«rbimet dhe mirÃ«mbajtja e bÃ«rÃ«"})]})]}),s.jsx("div",{className:"space-y-3",children:ye.details?.maintenance_history?.map((e,a)=>s.jsxs("div",{className:"p-4 bg-card rounded-lg border border-yellow-500/20 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-foreground",children:e.service_type||e.type||"ShÃ«rbim i PÃ«rgjithshÃ«m"}),e.description&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]}),e.date&&s.jsx("span",{className:"text-xs text-muted-foreground bg-yellow-50 dark:bg-yellow-900/30 px-2 py-1 rounded",children:e.date})]}),e.mileage&&s.jsxs("span",{className:"text-xs text-muted-foreground block mt-2",children:["Kilometrazh: ",e.mileage]})]},a))})]})]})]}),ye.details?.options&&s.jsx(re,{options:(e=>{if(!e)return{standard:[],choice:[],tuning:[]};const s={standard:[],choice:[],tuning:[]};return e.standard&&Array.isArray(e.standard)&&(s.standard=e.standard.map(e=>{const s=e.toString().trim();return Se[s]||`Pajisje ${s}`})),e.choice&&Array.isArray(e.choice)&&(s.choice=e.choice.map(e=>{const s=e.toString().trim();return Se[s]||`Opsion ${s}`})),e.tuning&&Array.isArray(e.tuning)&&(s.tuning=e.tuning.map(e=>{const s=e.toString().trim();return Se[s]||`Modifikim ${s}`})),s})(ye.details?.options),features:ye.features,safetyFeatures:ye.safety_features,comfortFeatures:ye.comfort_features}),!ye.details?.options&&s.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[s.jsxs("h4",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[s.jsx(I,{className:"h-5 w-5"}),"Pajisjet dhe Opsionet"]}),s.jsx("p",{className:"text-muted-foreground",children:"Nuk ka informacion pÃ«r pajisjet dhe opsionet e kÃ«saj makine."})]})]})]})})]}),s.jsx("div",{className:"lg:col-span-1 xl:col-span-1 space-y-4",children:s.jsx(c,{className:"glass-panel border-0 shadow-2xl sticky top-4 rounded-xl",children:s.jsxs(m,{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-center text-foreground",children:"Kontakt & Inspektim"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs(i,{onClick:Ce,className:"w-full h-10 text-sm font-medium shadow-md hover:shadow-lg transition-shadow bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(f,{className:"h-4 w-4 mr-2"}),"WhatsApp"]}),s.jsxs(i,{variant:"outline",className:"w-full h-10 text-sm font-medium border hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>window.open("tel:+38348181116","_self"),children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"+383 48 181 116"]}),s.jsxs(i,{variant:"outline",className:"w-full h-10 text-sm font-medium border hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>window.open("mailto:info@korauto.com","_self"),children:[s.jsx(V,{className:"h-4 w-4 mr-2"}),"info@korauto.com"]})]}),s.jsx("div",{className:"border-t border-border pt-4",children:s.jsx(g,{trigger:s.jsxs(i,{className:"w-full h-10 text-sm font-medium bg-primary hover:bg-primary/90 text-primary-foreground",children:[s.jsx(p,{className:"h-4 w-4 mr-2"}),"KÃ«rko Inspektim"]}),carId:ye.id,carMake:ye.make,carModel:ye.model,carYear:ye.year})}),s.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:s.jsxs("div",{className:"flex items-start gap-3 text-muted-foreground",children:[s.jsx(G,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),s.jsx("a",{href:"https://maps.google.com/?q=KORAUTO,Rr.+Ilaz+Kodra+70,PrishtinÃ«,Kosovo",target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:text-primary transition-colors cursor-pointer leading-relaxed",children:"Rr. Ilaz Kodra 70, PrishtinÃ«, Kosovo"})]})})]})})})]}),le&&s.jsx(se,{src:Pe[ie]||"",alt:`Car image ${ie+1}`,isOpen:le,onClose:()=>oe(!1),images:Pe,currentIndex:ie,onImageChange:ne})]})})});export{ie as default};
