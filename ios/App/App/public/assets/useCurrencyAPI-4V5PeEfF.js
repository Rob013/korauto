import{r as e}from"./vendor-Ce2S7JN_.js";const t="currency_cache_usd_eur",a=()=>{const[a,r]=e.useState({rate:.92,lastUpdated:(new Date).toISOString()}),[n,o]=e.useState(!1),[c,s]=e.useState(null),l=async()=>{o(!0),s(null);try{const e=(()=>{try{const e=localStorage.getItem(t);if(!e)return null;const a=JSON.parse(e);return Date.now()-new Date(a.lastUpdated).getTime()<864e5?a:(localStorage.removeItem(t),null)}catch(e){return null}})();if(e)return r(e),void o(!1);const a=await fetch("https://api.currencyapi.com/v3/latest?apikey=cur_live_SqgABFxnWHPaJjbRVJQdOLJpYkgCiJgQkIdvVFN6&currencies=EUR&base_currency=USD");if(!a.ok)throw new Error(`API Error: ${a.status}`);const n=await a.json();if(!n.data?.EUR)throw new Error("Invalid API response format");const c={rate:n.data.EUR,lastUpdated:(new Date).toISOString()};r(c),(e=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(a){}})(c)}catch(e){s(e instanceof Error?e.message:"Failed to fetch exchange rate");const a=JSON.parse(localStorage.getItem(t)||"null");a&&r(a)}finally{o(!1)}},u=e.useCallback(e=>Math.round(e*a.rate),[a.rate]),i=e.useCallback(e=>Math.round(71e-5*e),[]),d=e.useCallback(e=>e?e.replace(/(\d{1,3}(?:,\d{3})*|\d+)\s*won/gi,(e,t)=>{const a=parseInt(t.replace(/,/g,""));return`â‚¬${i(a).toLocaleString()}`}):e,[i]);return e.useEffect(()=>{l()},[]),{exchangeRate:a,loading:n,error:c,convertUSDtoEUR:u,convertKRWtoEUR:i,processFloodDamageText:d,refreshRate:l}};export{a as u};
