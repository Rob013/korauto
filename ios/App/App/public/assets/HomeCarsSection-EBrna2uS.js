import{j as e}from"./ui-5CGx59HE.js";import{L as a}from"./LazyCarCard-PNibhy4Q.js";import{r as s,a as t}from"./vendor-Ce2S7JN_.js";import{a as r,B as l,X as i,C as n}from"./index-DXJv48IP.js";import{useSecureAuctionAPI as o}from"./useSecureAuctionAPI-CofUx0nG.js";import{u as c}from"./useCurrencyAPI-4V5PeEfF.js";import{u as m}from"./useInView-IREnXN-n.js";import{S as d,a as u,A as x,b as h,c as p,d as g}from"./select-BjugpQxa.js";import{C as f}from"./chevron-down-CZttC9Jd.js";import{C as j}from"./check-DVisVKU7.js";import{I as b}from"./input-BjLg3enW.js";import{L as v}from"./label-CADau4dH.js";import{B as y}from"./badge-CtAh7DWu.js";import{C as _}from"./car-BxrBaIAr.js";import{S as N}from"./settings-CifkK-3H.js";import{C as w}from"./calendar-bSjTuHsD.js";import{D as k,F as C}from"./filter-BlSNsmF6.js";import{C as S}from"./chevron-up-BDNiUINz.js";import{C as M}from"./cog-BSSg9uAk.js";import{P as A,F as T}from"./palette-CnXSA3iB.js";import{M as V}from"./map-pin-k_93RLhL.js";import{S as z}from"./search-b9WDS7dH.js";import{L as F}from"./loader-circle-Cz5GAv8d.js";import{f as D,a as L}from"./fallbackData-DuQB7R-4.js";import{b as P}from"./router-CrtsEgIx.js";import{C as I}from"./circle-alert-BSl6uMxW.js";import"./client-ClhMjqWB.js";import"./supabase-FBsvvB2P.js";import"./useImageSwipe-D5MjfpnV.js";import"./camera-Dgez-INn.js";import"./heart-j_9DbFLM.js";import"./gauge-C77d0s-O.js";import"./shield-2CMa0t69.js";import"./utils-DN5cgeP9.js";import"./query-D7el4M-V.js";import"./ui-form-bTH_Yx3M.js";const O=e=>{if(e.lots&&Array.isArray(e.lots)&&e.lots.length>0){const a=e.lots[0];return!!(a.buy_now||a.final_bid||a.price)}return!!(e.buy_now||e.final_bid||e.price)},$=e=>{if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(t.isValidElement(e)){const a=e.props?.children;if(Array.isArray(a))return a.map(e=>$(e)).filter(e=>e&&e.trim()).join(" ");if(a)return $(a)}return Array.isArray(e)?e.map(e=>$(e)).filter(e=>e&&e.trim()).join(" "):""},q=({value:a,onValueChange:s,disabled:t,placeholder:l,className:i,options:n})=>e.jsxs("select",{value:a||"",onChange:e=>{const a=e.target.value;s(a),a&&["price_asc","price_desc","year_asc","year_desc","mileage_asc","mileage_desc","make_asc","make_desc","model_asc","model_desc"].includes(a)},disabled:t,className:r("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","appearance-none","min-h-[44px] text-[16px] sm:text-sm","md:min-h-[48px]","-webkit-appearance-none","focus:-webkit-appearance-none","dark:bg-background dark:border-border dark:text-foreground","dark:focus:ring-ring dark:focus:ring-offset-background",i),style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' d='M19.5 8.25l-7.5 7.5-7.5-7.5'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.75rem center",backgroundSize:"1rem",backgroundRepeat:"no-repeat",paddingRight:"2.5rem",WebkitAppearance:"none",MozAppearance:"none"},children:[l&&e.jsx("option",{value:"",disabled:!0,hidden:!0,children:l}),n.map(a=>{const s="string"==typeof a.label?a.label:$(a.label)||a.value;return e.jsx("option",{value:a.value,disabled:a.disabled,className:"py-2 px-3 dark:bg-background dark:text-foreground",children:s},a.value)})]}),U=({value:a,children:s,onSelect:t,isSelected:l,className:i})=>e.jsxs("div",{className:r("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),onClick:()=>t(a),children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l&&e.jsx(j,{className:"h-4 w-4"})}),e.jsx("span",{className:"block truncate",children:s})]}),E=({className:a,children:s,onClick:t,disabled:l})=>e.jsxs("button",{type:"button",role:"combobox","aria-expanded":"false",className:r("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),onClick:t,disabled:l,children:[s,e.jsx(f,{className:"h-4 w-4 opacity-50"})]}),R=({children:a,className:s})=>e.jsx("div",{className:r("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95","absolute top-full left-0 right-0 mt-1",s),children:e.jsx("div",{className:"p-1 max-h-60 overflow-y-auto",children:a})}),Z=({value:a,onValueChange:t,disabled:l,placeholder:i,className:n,options:o})=>{const[c,m]=s.useState(!1),d=s.useRef(null),u=o.find(e=>e.value===a);s.useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const x=e=>{e.startsWith("separator-")||(t(e),m(!1),e&&["price_asc","price_desc","year_asc","year_desc","mileage_asc","mileage_desc","make_asc","make_desc","model_asc","model_desc"].includes(e))};return e.jsxs("div",{className:r("relative",n),ref:d,children:[e.jsx(E,{onClick:()=>{l||m(!c)},disabled:l,className:n,children:e.jsx("span",{className:r("block truncate",!u&&"text-muted-foreground"),children:u?u.label:i})}),c&&e.jsx(R,{children:o.map(s=>s.value.startsWith("separator-")?e.jsx("div",{className:"px-2 py-1 text-xs font-medium text-muted-foreground border-b border-border text-center",children:s.label},s.value):e.jsx(U,{value:s.value,onSelect:x,isSelected:s.value===a,className:s.disabled?"opacity-50 cursor-not-allowed":"",children:s.label},s.value))})]})},B=a=>{const{isIOS:t,isMac:r,isAndroid:l,isMobile:i,isTouch:n,isPad:o}=(()=>{const[e,a]=s.useState({isIOS:!1,isMac:!1,isAndroid:!1,isMobile:!1,isTouch:!1,isPad:!1});return s.useEffect(()=>{const e=navigator.userAgent||navigator.vendor||window.opera,s=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,t=/iPad/.test(e)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,r=/Macintosh|Mac OS X|MacIntel/.test(e)&&!s&&!t,l=/Android/.test(e),i=/Mobi|Android/i.test(e),n=window.matchMedia("(max-width: 768px)").matches,o=i||n,c="ontouchstart"in window||navigator.maxTouchPoints>0;a({isIOS:s,isMac:r,isAndroid:l,isMobile:o,isTouch:c,isPad:t})},[]),e})();return s.useMemo(()=>!!(t||o||r||l&&i||n&&i),[t,o,r,l,i,n])?e.jsx(q,{...a}):e.jsx(Z,{...a})},K={silver:1,purple:2,orange:3,green:4,red:5,gold:6,charcoal:7,brown:8,grey:9,turquoise:10,blue:11,bronze:12,white:13,cream:14,black:15,yellow:16,beige:17,pink:18,two_colors:100},G={diesel:1,electric:2,hybrid:3,gasoline:4,gas:5,flexible:6,hydrogen:7},H={automatic:1,manual:2},W={sedan:1,suv:2,hatchback:3,coupe:4,convertible:5,wagon:6,truck:7,van:8,crossover:9,compact:10,luxury:11,sports:12},Y=e=>{const a=Object.values({german:{name:"German Brands",brands:["BMW","Mercedes-Benz","Audi","Volkswagen","Porsche","Opel"],priority:1},korean:{name:"Korean Brands",brands:["Hyundai","Kia","Genesis"],priority:2},japanese:{name:"Japanese Brands",brands:["Toyota","Honda","Nissan","Mazda","Subaru","Lexus","Infiniti","Acura","Mitsubishi"],priority:3},american:{name:"American Brands",brands:["Ford","Chevrolet","Cadillac","GMC","Tesla","Chrysler","Jeep","Dodge"],priority:4},luxury:{name:"Luxury/European Brands",brands:["Land Rover","Jaguar","Volvo","Ferrari","Lamborghini","Maserati","Bentley","Rolls-Royce","Aston Martin","McLaren","Mini"],priority:5},french:{name:"French Brands",brands:["Peugeot","Renault","Citroën"],priority:6},italian:{name:"Italian Brands",brands:["Fiat","Alfa Romeo"],priority:7},other:{name:"Other Brands",brands:["Skoda","Seat"],priority:8}}).find(a=>a.brands.includes(e.trim()));return{priority:a?.priority||999,categoryName:a?.name||"Other Brands"}},J=s.memo(({filters:a,manufacturers:t,models:r=[],filterCounts:o,loadingCounts:c=!1,onFiltersChange:m,onClearFilters:d,onManufacturerChange:u,onModelChange:x,showAdvanced:h=!1,onToggleAdvanced:p,onFetchGrades:g,onFetchTrimLevels:j,isHomepage:D=!1,compact:L=!1,onSearchCars:P,onCloseFilter:I})=>{const[O,$]=s.useState([]),[q,U]=s.useState([]),[E,R]=s.useState(!1),[Z,J]=s.useState(!1),[X,Q]=s.useState(["basic"]),ee=s.useMemo(()=>(e=>!!(e.manufacturer_id||e.model_id||e.color||e.fuel_type||e.transmission||e.from_year||e.to_year||e.buy_now_price_from||e.buy_now_price_to||e.odometer_from_km||e.odometer_to_km||e.seats_count||e.max_accidents||e.grade_iaai||e.search))(a),[a]),ae=s.useCallback((e,s)=>{const t="all"===s||"any"===s?void 0:s;if(R(!0),"manufacturer_id"===e)u?.(t||""),m({...a,[e]:t,model_id:void 0,grade_iaai:void 0});else if("model_id"===e)x?.(t||""),m({...a,[e]:t,grade_iaai:void 0});else{const s={...a,[e]:t};m(s)}setTimeout(()=>R(!1),"from_year"===e||"to_year"===e?25:100)},[a,m,u,x]),se=s.useCallback(()=>{if(P)P();else if(D){const e=new URLSearchParams;Object.entries(a).forEach(([a,s])=>{s&&""!==s&&e.set(a,s)}),window.location.href=`/catalog?${e.toString()}`}},[P,D,a]),te=s.useCallback(e=>{const s={...a,from_year:e.from.toString(),to_year:e.to.toString()};m(s)},[a,m]),re=s.useMemo(()=>(new Date).getFullYear(),[]),le=s.useMemo(()=>(e=>{const a=e||(new Date).getFullYear();return Array.from({length:32},(e,s)=>Math.max(a+2-s,1996))})(re),[re]),ie=s.useMemo(()=>(e=>{const a=e||(new Date).getFullYear();return[{label:"2022+",from:2022,to:a+2},{label:"2020+",from:2020,to:2022},{label:"2018+",from:2018,to:2020},{label:"2015+",from:2015,to:2018},{label:"2010+",from:2010,to:a+2},{label:"2005+",from:2005,to:a+2},{label:"2000+",from:2e3,to:a+2}]})(re),[re]),ne=s.useMemo(()=>[...ee&&(a.from_year||a.to_year)?[]:[{value:"all",label:"Të gjithë vitet"}],...le.map(e=>({value:e.toString(),label:e.toString()}))],[le,ee,a.from_year,a.to_year]),oe=s.useMemo(()=>(e=>e.filter(e=>e.id&&e.name&&"string"==typeof e.name&&e.name.trim().length>0&&e.cars_qty&&e.cars_qty>0).sort((e,a)=>{const s=e.name.trim(),t=a.name.trim(),r=Y(s),l=Y(t);if(r.priority!==l.priority)return r.priority-l.priority;const i=e.cars_qty||0,n=a.cars_qty||0;return i!==n?n-i:s.localeCompare(t)}))(t),[t]);s.useEffect(()=>{if(a.manufacturer_id&&g){const e=setTimeout(()=>{J(!0),g(a.manufacturer_id,a.model_id).then(e=>{Array.isArray(e)&&$(e),J(!1)}).catch(e=>{J(!1)})},300);return()=>clearTimeout(e)}$([]),J(!1)},[a.manufacturer_id,a.model_id,g]),s.useEffect(()=>{if(a.manufacturer_id&&j){const e=setTimeout(()=>{j(a.manufacturer_id,a.model_id).then(e=>{Array.isArray(e)&&U(e)}).catch(e=>{U([])})},300);return()=>clearTimeout(e)}U([])},[a.manufacturer_id,a.model_id,j]);const ce=e=>{Q(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])};return L?e.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Kërko Makinat"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:d,className:"text-muted-foreground hover:text-destructive flex items-center gap-1 h-6 px-1.5",children:[e.jsx(i,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Pastro"})]}),I&&e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>{I(),setTimeout(()=>{const e=document.querySelector("[data-filter-panel]");e&&(e.style.transform="translateX(-100%)")},100)},className:"text-muted-foreground hover:text-foreground flex items-center gap-1 h-6 px-1.5",title:"Mbyll filtrat",children:[e.jsx(i,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Mbyll"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(_,{className:"h-2.5 w-2.5"}),"Marka"]}),e.jsx(B,{value:a.manufacturer_id||"all",onValueChange:e=>ae("manufacturer_id",e),placeholder:"Zgjidhni markën",className:"filter-control h-8 text-xs",options:[...ee&&a.manufacturer_id?[]:[{value:"all",label:"Të gjitha markat"}],...oe.map(a=>({value:a.id.toString(),label:e.jsxs("div",{className:"flex items-center gap-1.5",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-3 h-3 object-contain"}),e.jsxs("span",{className:"text-xs",children:[a.name," (",a.cars_qty,")"]})]})}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(N,{className:"h-2.5 w-2.5"}),"Modeli"]}),e.jsx(B,{value:a.model_id||"all",onValueChange:e=>ae("model_id",e),disabled:!a.manufacturer_id,placeholder:a.manufacturer_id?"Zgjidhni modelin":"Zgjidhni markën së pari",className:"filter-control h-8 text-xs",options:[...ee&&a.model_id?[]:[{value:"all",label:"Të gjithë modelet"}],...r.filter(e=>e.cars_qty&&e.cars_qty>0).map(e=>({value:e.id.toString(),label:`${e.name} (${e.cars_qty})`}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs text-muted-foreground flex items-center gap-1",children:["Gamë vjetëshe:",e.jsx("span",{className:"text-xs text-primary bg-primary/10 px-1 rounded",title:"Optimized for instant results",children:"⚡"})]}),e.jsx("div",{className:"year-buttons flex flex-wrap gap-1",children:ie.slice(0,4).map(s=>e.jsx(l,{variant:a.from_year===s.from.toString()&&a.to_year===s.to.toString()?"default":"outline",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>te(s),title:`⚡ Instant filter: From ${s.from} to present (${s.to})`,children:s.label},s.label))})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(w,{className:"h-2.5 w-2.5"}),"Gamë Vjetëshe"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"Nga"}),e.jsx(B,{value:a.from_year||"all",onValueChange:e=>ae("from_year",e),placeholder:"Të gjithë vitet",className:"filter-control h-8 text-xs",options:ne})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"Deri"}),e.jsx(B,{value:a.to_year||"all",onValueChange:e=>ae("to_year",e),placeholder:"Të gjithë vitet",className:"filter-control h-8 text-xs",options:ne})]})]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(k,{className:"h-2.5 w-2.5"}),"Çmimi (EUR)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[e.jsx(b,{type:"number",placeholder:"Nga",value:a.buy_now_price_from||"",onChange:e=>ae("buy_now_price_from",e.target.value),className:"filter-control h-8 text-xs"}),e.jsx(b,{type:"number",placeholder:"Deri",value:a.buy_now_price_to||"",onChange:e=>ae("buy_now_price_to",e.target.value),className:"filter-control h-8 text-xs"})]})]}),e.jsxs(l,{variant:"ghost",onClick:()=>ce("more"),className:"w-full justify-between text-xs h-7",children:["Më Shumë Filtra",X.includes("more")?e.jsx(S,{className:"h-3 w-3"}):e.jsx(f,{className:"h-3 w-3"})]}),X.includes("more")&&e.jsx("div",{className:"space-y-2 pt-2 border-t",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(M,{className:"h-2.5 w-2.5"}),"Grada/Motori"]}),e.jsx(B,{value:a.grade_iaai||"all",onValueChange:e=>ae("grade_iaai",e),disabled:!a.manufacturer_id,placeholder:a.manufacturer_id?"Të gjitha gradat":"Zgjidhni markën së pari",className:"filter-control h-8 text-xs",options:[{value:"all",label:"Të gjitha gradat"},...O.map(e=>({value:e.value,label:`${e.label}${e.count?` (${e.count})`:""}`}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(M,{className:"h-2.5 w-2.5"}),"Niveli i Pajisjes"]}),e.jsx(B,{value:a.trim_level||"all",onValueChange:e=>ae("trim_level",e),disabled:!a.manufacturer_id,placeholder:a.manufacturer_id?"Të gjithë nivelet e pajisjes":"Zgjidhni markën së pari",className:"filter-control h-8 text-xs",options:[{value:"all",label:"Të gjithë nivelet e pajisjes"},...q.map(e=>({value:e.value,label:`${e.label}${e.count?` (${e.count})`:""}`}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(A,{className:"h-2.5 w-2.5"}),"Ngjyra"]}),e.jsx(B,{value:a.color||"all",onValueChange:e=>ae("color",e),placeholder:"Çdo ngjyrë",className:"filter-control h-8 text-xs",options:[...ee&&a.color?[]:[{value:"all",label:"Çdo ngjyrë"}],...Object.entries(K).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(T,{className:"h-2.5 w-2.5"}),"Karburanti"]}),e.jsx(B,{value:a.fuel_type||"all",onValueChange:e=>ae("fuel_type",e),placeholder:"Çdo tip",className:"filter-control h-8 text-xs",options:[...ee&&a.fuel_type?[]:[{value:"all",label:"Çdo tip"}],...Object.entries(G).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(N,{className:"h-2.5 w-2.5"}),"Transmisioni"]}),e.jsx(B,{value:a.transmission||"all",onValueChange:e=>ae("transmission",e),placeholder:"Çdo tip",className:"filter-control h-8 text-xs",options:[...ee&&a.transmission?[]:[{value:"all",label:"Çdo tip"}],...Object.entries(H).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(_,{className:"h-2.5 w-2.5"}),"Lloji i Trupit"]}),e.jsx(B,{value:a.body_type||"all",onValueChange:e=>ae("body_type",e),placeholder:"Çdo tip",className:"filter-control h-8 text-xs",options:[{value:"all",label:"Çdo tip"},...Object.entries(W).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]}),e.jsxs("div",{className:"space-y-1 filter-section",children:[e.jsxs(v,{className:"filter-label text-xs font-medium flex items-center gap-1.5",children:[e.jsx(V,{className:"h-2.5 w-2.5"}),"Kilometrazhi (km)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[e.jsx(b,{type:"number",placeholder:"Nga",value:a.odometer_from_km||"",onChange:e=>ae("odometer_from_km",e.target.value),className:"filter-control h-8 text-xs"}),e.jsx(b,{type:"number",placeholder:"Deri",value:a.odometer_to_km||"",onChange:e=>ae("odometer_to_km",e.target.value),className:"filter-control h-8 text-xs"})]})]})]})}),e.jsx("div",{className:"pt-2 border-t flex-shrink-0",children:e.jsxs(l,{onClick:se,className:"w-full h-8 bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-xs",size:"sm",children:[e.jsx(z,{className:"h-3 w-3 mr-1.5"}),"Kërko Makinat"]})})]})})]}):D?e.jsx(n,{className:"p-4 bg-gradient-to-r from-card via-card/95 to-card border-border/50 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Kërko Makinën"})]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:d,className:"text-muted-foreground hover:text-foreground",children:e.jsx(i,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_,{className:"h-3 w-3"}),"Marka"]}),e.jsx(B,{value:a.manufacturer_id||"all",onValueChange:e=>ae("manufacturer_id",e),placeholder:E?"":"Zgjidhni markën",className:"h-11",disabled:E,options:[...ee&&a.manufacturer_id?[]:[{value:"all",label:"Të gjitha Markat"}],...oe.map(a=>({value:a.id.toString(),label:e.jsxs("div",{className:"flex items-center gap-2",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-5 h-5 object-contain"}),e.jsxs("span",{children:[a.name," (",a.cars_qty,")"]})]})}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(N,{className:"h-3 w-3"}),"Modeli"]}),e.jsx(B,{value:a.model_id||"all",onValueChange:e=>ae("model_id",e),disabled:!a.manufacturer_id,placeholder:a.manufacturer_id?"Zgjidhni modelin":"Zgjidhni markën së pari",className:"h-11",options:[...ee&&a.model_id?[]:[{value:"all",label:"Të gjithë Modelet"}],...r.filter(e=>e.cars_qty&&e.cars_qty>0).map(e=>({value:e.id.toString(),label:`${e.name} (${e.cars_qty})`}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(w,{className:"h-3 w-3"}),"Vitet",(a.from_year||a.to_year)&&e.jsxs(y,{variant:"secondary",className:"text-xs",children:[a.from_year||"Çdo vit"," - ",a.to_year||"sot"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"Nga viti"}),e.jsx(B,{value:a.from_year||"all",onValueChange:e=>ae("from_year",e),placeholder:"Çdo vit",className:"h-9 text-sm",options:ne})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"Deri në vitin"}),e.jsx(B,{value:a.to_year||"all",onValueChange:e=>ae("to_year",e),placeholder:"Çdo vit",className:"h-9 text-sm",options:ne})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(v,{className:"text-xs text-muted-foreground mb-2 block",children:"Zgjidhni vitet:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.slice(0,4).map(s=>e.jsx(l,{variant:a.from_year===s.from.toString()&&a.to_year===s.to.toString()?"default":"outline",size:"sm",className:"h-8 px-3 text-xs",onClick:()=>te(s),title:`⚡ Instant filter: From ${s.from} to present (${s.to})`,children:s.label},s.label)),(a.from_year||a.to_year)&&e.jsx(l,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs text-muted-foreground",onClick:()=>m({...a,from_year:void 0,to_year:void 0}),children:e.jsx(i,{className:"h-3 w-3"})})]})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(l,{onClick:se,className:"bg-primary hover:bg-primary/90 text-primary-foreground font-medium px-8 py-3 h-12 text-base",size:"lg",children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),"Kërko Makinat"]})})]})}):e.jsxs(n,{className:"glass-panel p-4 space-y-4 border-0 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Filtrat e Kërkimit"})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:d,disabled:E,className:"text-xs",children:[E?e.jsx(F,{className:"h-3 w-3 mr-1 animate-spin"}):e.jsx(i,{className:"h-3 w-3 mr-1"}),"Pastro të gjitha"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{variant:"ghost",onClick:()=>ce("basic"),className:"w-full justify-between p-2 h-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Filtrat Bazë"})]}),X.includes("basic")?e.jsx(S,{className:"h-4 w-4"}):e.jsx(f,{className:"h-4 w-4"})]}),X.includes("basic")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 p-3 bg-white/5 dark:bg-black/10 backdrop-blur-sm rounded-lg border border-white/10 dark:border-white/5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Marka"}),e.jsx(B,{value:a.manufacturer_id||"all",onValueChange:e=>ae("manufacturer_id",e),placeholder:"Zgjidhni markën",options:[...ee&&a.manufacturer_id?[]:[{value:"all",label:"Të gjitha Markat"}],...oe.map(a=>({value:a.id.toString(),label:e.jsxs("div",{className:"flex items-center gap-2",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-4 h-4 object-contain"}),e.jsxs("span",{children:[a.name," (",a.cars_qty,")"]})]})}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Modeli"}),e.jsx(B,{value:a.model_id||"all",onValueChange:e=>ae("model_id",e),disabled:!a.manufacturer_id,placeholder:a.manufacturer_id?"Zgjidhni modelin":"Zgjidhni markën së pari",options:[...ee&&a.model_id?[]:[{value:"all",label:"Të gjithë Modelet"}],...r.filter(e=>e.cars_qty&&e.cars_qty>0).map(e=>({value:e.id.toString(),label:`${e.name} (${e.cars_qty})`}))]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{variant:"ghost",onClick:()=>ce("advanced"),className:"w-full justify-between p-2 h-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Filtrat e Avancuar"})]}),X.includes("advanced")?e.jsx(S,{className:"h-4 w-4"}):e.jsx(f,{className:"h-4 w-4"})]}),X.includes("advanced")&&e.jsxs("div",{className:"space-y-4 p-3 bg-white/5 dark:bg-black/10 backdrop-blur-sm rounded-lg border border-white/10 dark:border-white/5",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(k,{className:"h-3 w-3"}),"Çmimi (EUR)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(b,{type:"number",placeholder:"Nga",value:a.buy_now_price_from||"",onChange:e=>ae("buy_now_price_from",e.target.value)}),e.jsx(b,{type:"number",placeholder:"Deri",value:a.buy_now_price_to||"",onChange:e=>ae("buy_now_price_to",e.target.value)})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(w,{className:"h-3 w-3"}),"Vitet",(a.from_year||a.to_year)&&e.jsxs(y,{variant:"secondary",className:"text-xs",children:[a.from_year||"Çdo vit"," - ",a.to_year||"sot"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx(v,{className:"text-xs text-muted-foreground mb-2 block",children:"Vitet:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.map(s=>e.jsx(l,{variant:a.from_year===s.from.toString()&&a.to_year===s.to.toString()?"default":"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>te(s),title:`⚡ Instant filter: From ${s.from} to present (${s.to})`,children:s.label},s.label)),(a.from_year||a.to_year)&&e.jsx(l,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground",onClick:()=>m({...a,from_year:void 0,to_year:void 0}),children:e.jsx(i,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(v,{className:"text-xs text-muted-foreground mb-2 block",children:"Custom Year Range:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"From Year"}),e.jsx(B,{value:a.from_year||"all",onValueChange:e=>ae("from_year",e),placeholder:"All years",className:"h-8 text-xs",options:ne})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs text-muted-foreground",children:"To Year"}),e.jsx(B,{value:a.to_year||"all",onValueChange:e=>ae("to_year",e),placeholder:"All years",className:"h-8 text-xs",options:ne})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(M,{className:"h-3 w-3"}),"Grada/Motori"]}),e.jsx(B,{value:a.grade_iaai||"all",onValueChange:e=>ae("grade_iaai",e),disabled:!a.manufacturer_id||Z,placeholder:Z?"Po ngarkon...":"Zgjidhni gradën",options:[...ee&&a.grade_iaai?[]:[{value:"all",label:"Të gjitha gradat"}],...O.map(e=>({value:e.value,label:e.label}))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(A,{className:"h-3 w-3"}),"Ngjyra"]}),e.jsx(B,{value:a.color||"all",onValueChange:e=>ae("color",e),placeholder:"Çdo ngjyrë",options:[...ee&&a.color?[]:[{value:"all",label:"Çdo ngjyrë"}],...Object.entries(K).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(T,{className:"h-3 w-3"}),"Karburanti"]}),e.jsx(B,{value:a.fuel_type||"all",onValueChange:e=>ae("fuel_type",e),placeholder:"Çdo tip",options:[...ee&&a.fuel_type?[]:[{value:"all",label:"Çdo tip"}],...Object.entries(G).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(N,{className:"h-3 w-3"}),"Transmisioni"]}),e.jsx(B,{value:a.transmission||"all",onValueChange:e=>ae("transmission",e),placeholder:"Çdo tip",options:[...ee&&a.transmission?[]:[{value:"all",label:"Çdo tip"}],...Object.entries(H).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_,{className:"h-3 w-3"}),"Lloji i Trupit"]}),e.jsx(B,{value:a.body_type||"all",onValueChange:e=>ae("body_type",e),placeholder:"Çdo tip",options:[{value:"all",label:"Çdo tip"},...Object.entries(W).map(([e,a])=>({value:a.toString(),label:e.charAt(0).toUpperCase()+e.slice(1)}))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{className:"h-3 w-3"}),"Kilometrazhi"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(b,{type:"number",placeholder:"Nga (km)",value:a.odometer_from_km||"",onChange:e=>ae("odometer_from_km",e.target.value)}),e.jsx(b,{type:"number",placeholder:"Deri (km)",value:a.odometer_to_km||"",onChange:e=>ae("odometer_to_km",e.target.value)})]})]})]})]})]})});J.displayName="EncarStyleFilter";const X=e=>e.filter(e=>!(e=>{if(!e)return!0;const a=e.title?.toLowerCase()||"";if(["gjenarta","elite","test","sample","demo","placeholder","emergency-","nis2005","altima","code ","lot "].some(e=>a.includes(e)))return!0;const s=e.manufacturer?.name?.toLowerCase()||"",t=e.model?.name?.toLowerCase()||"";if(s.includes("test")||t.includes("test")||s.includes("demo")||t.includes("demo")||s.includes("sample")||t.includes("sample"))return!0;const r=e.lots?.[0];if(!(r?.images?.normal?.length>0||r?.images?.big?.length>0))return!0;const l=r?.buy_now||0;if(l<1e3||l>5e5)return!0;if(!e.manufacturer?.name||!e.model?.name||!e.year)return!0;const i=e.vin?.toLowerCase()||"";if(i.includes("test")||i.includes("demo")||i.length<10)return!0;const n=e.lot_number?.toLowerCase()||"";return!!(n.includes("test")||n.includes("demo")||n.includes("emergency")||n.startsWith("nis"))})(e)),Q=s.memo(()=>{const t=P(),{ref:r,isInView:i}=m({threshold:.1,triggerOnce:!0}),{cars:n,loading:f,error:j,fetchCars:b,fetchManufacturers:v,fetchModels:y,fetchGenerations:_,fetchGrades:N,fetchTrimLevels:w}=o(),{convertUSDtoEUR:k}=c(),[C,S]=s.useState("popular"),[M,A]=s.useState(!1),[T,V]=s.useState(!1),[z,F]=s.useState(!1),[$,q]=s.useState({}),[U,E]=s.useState({}),[R,Z]=s.useState([]),[B,K]=s.useState([]),[G,H]=s.useState([]),[W,Y]=s.useState(null),[Q,ee]=s.useState({}),[ae,se]=s.useState(!1),[te,re]=s.useState(!1),[le,ie]=s.useState(!1),ne=s.useMemo(()=>{const e=j&&0===n.length?D:n;return X(e).map(e=>({...e,status:String(e.status||""),lot_number:String(e.lot_number||""),cylinders:Number(e.cylinders||0)}))},[n,j]),oe=s.useMemo(()=>!!(U.manufacturer_id||U.model_id||U.generation_id||U.color||U.fuel_type||U.transmission||U.odometer_from_km||U.odometer_to_km||U.from_year||U.to_year||U.buy_now_price_from||U.buy_now_price_to||U.search||U.seats_count),[U]),ce=((e,a,t=50)=>s.useMemo(()=>{if(a||0===e.length)return X(e);const s=new Date,r=100*s.getDate()+(s.getMonth()+1),l=X(e).filter(e=>e.manufacturer?.name&&e.lots?.[0]?.images?.normal?.[0]&&e.lots?.[0]?.buy_now>5e3&&e.lots?.[0]?.buy_now<2e5),i=e=>{const a=1e4*Math.sin(e);return a-Math.floor(a)};return((e,a)=>{const s=[...e];for(let t=s.length-1;t>0;t--){const e=Math.floor(i(a+t)*(t+1));[s[t],s[e]]=[s[e],s[t]]}return s})(l,r).slice(0,Math.min(l.length,t))},[e,a,t]))(ne,oe,50),me=((e,a)=>s.useMemo(()=>{if(!e||0===e.length)return[];const s=(e=>e.filter(O))(e);return[...s].sort((e,s)=>{const t=e.lots?.[0],r=s.lots?.[0],l=t?.buy_now||t?.final_bid||t?.price||0,i=r?.buy_now||r?.final_bid||r?.price||0;switch(a){case"recently_added":{const a=t?.sale_date?new Date(t.sale_date).getTime():parseInt(e.id)||0;return(r?.sale_date?new Date(r.sale_date).getTime():parseInt(s.id)||0)-a}case"oldest_first":return(t?.sale_date?new Date(t.sale_date).getTime():parseInt(e.id)||0)-(r?.sale_date?new Date(r.sale_date).getTime():parseInt(s.id)||0);case"price_low":return l-i;case"price_high":return i-l;case"year_new":return s.year-e.year;case"year_old":return e.year-s.year;case"mileage_low":return(t?.odometer?.km||999999)-(r?.odometer?.km||999999);case"mileage_high":{const e=t?.odometer?.km||0;return(r?.odometer?.km||0)-e}case"make_az":{const a=e.manufacturer?.name||"",t=s.manufacturer?.name||"";return a.localeCompare(t)}case"make_za":{const a=e.manufacturer?.name||"";return(s.manufacturer?.name||"").localeCompare(a)}case"popular":{const a=e.popularity_score||t?.popularity_score||0;return(s.popularity_score||r?.popularity_score||0)-a}default:return 0}})},[e,a]))(ne,C),de=s.useMemo(()=>M||oe?me:ce,[M,oe,ce,me]),ue=s.useMemo(()=>T?de:de.slice(0,50),[T,de,50,M,oe]);return s.useEffect(()=>{ue.length>0&&setTimeout(()=>{ue.slice(0,6).forEach(e=>{const a=e.lots?.[0],s=a?.images?.normal?.[0]||a?.images?.big?.[0];s&&((new Image).src=s)})},100)},[ue]),s.useEffect(()=>{const e=(new Date).getDate();b((e-1)%10+1,{per_page:"30"},!0),(async()=>{se(!0);try{const e=Date.now()-(Q.lastUpdated||0);if(Q.manufacturers&&e<3e5)return Z(Q.manufacturers),void se(!1);const a=await v();Z(a),ee(e=>({...e,manufacturers:a,lastUpdated:Date.now()}))}catch(e){}finally{se(!1)}})()},[]),e.jsx("section",{ref:r,id:"cars",className:"py-4 sm:py-6 lg:py-8 bg-secondary/30 transition-all duration-1000 "+(i?"animate-fade-in-up":"opacity-0"),children:e.jsxs("div",{className:"container-responsive",children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4 text-foreground gradient-text",children:"Makinat e Disponueshme"}),e.jsx("div",{className:"flex justify-center mt-4 sm:mt-6",children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>F(!z),className:"w-full sm:w-auto btn-enhanced border-primary text-primary hover:bg-primary hover:text-primary-foreground min-h-[44px]",children:z?"Fshih Filtrat":"Shfaq Filtrat"})})]}),j&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-center gap-2 mb-6 sm:mb-8 p-4 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg mx-2 sm:mx-0",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5 sm:mt-0"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-200 text-sm sm:text-base text-left sm:text-center",children:0===n.length?"Shfaqen makina të përzgjedhura. Për përditësime të reja, kontaktoni: +38348181116":"Problem me lidhjen API: Disa funksione mund të jenë të kufizuara."})]}),z&&e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsx(J,{filters:U,manufacturers:R.length>0?R:L,models:B,filterCounts:W,onFiltersChange:e=>{if(e.generation_id&&e.generation_id!==$.generation_id){F(!1);const a=new URLSearchParams;return Object.entries(e).forEach(([e,s])=>{s&&""!==s&&a.set(e,s)}),a.set("fromHomepage","true"),sessionStorage.removeItem("encar-catalog-scroll"),void t(`/catalog?${a.toString()}`)}if(Object.entries(e).some(([e,a])=>!["manufacturer_id","model_id","generation_id"].includes(e)&&a&&""!==a)){F(!1);const a=new URLSearchParams;Object.entries(e).forEach(([e,s])=>{s&&""!==s&&a.set(e,s)}),a.set("fromHomepage","true"),t(`/catalog?${a.toString()}`)}else E(e)},onClearFilters:()=>{q({}),E({})},onManufacturerChange:async e=>{re(!0);try{if(Q.models&&Q.models[e])return K(Q.models[e]),H([]),void re(!1);const a=await y(e);K(a),H([]),ee(s=>({...s,models:{...s.models,[e]:a}}))}catch(a){}finally{re(!1)}},onModelChange:async e=>{ie(!0);try{if(Q.generations&&Q.generations[e])return H(Q.generations[e]),void ie(!1);const a=await _(e);H(a),ee(s=>({...s,generations:{...s.generations,[e]:a}}))}catch(a){}finally{ie(!1)}},onFetchGrades:N,onFetchTrimLevels:w,isHomepage:!0,onSearchCars:()=>{F(!1);const e=new URLSearchParams;Object.entries(U).forEach(([a,s])=>{s&&""!==s&&e.set(a,s)}),e.set("fromHomepage","true"),t(`/catalog?${e.toString()}`)}})}),e.jsx("div",{className:"text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),"Zgjedhja e Ditës - ",(new Date).getDate()," ",(new Date).toLocaleDateString("sq-AL",{month:"long"})]})}),e.jsx("div",{className:"mb-6 sm:mb-8 mx-2 sm:mx-0",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs(d,{value:C,onValueChange:e=>{S(e),A(!0)},children:[e.jsxs(u,{className:"w-48",children:[e.jsx(x,{className:"h-3 w-3 mr-2"}),e.jsx(h,{placeholder:"Rreshtoni sipas..."})]}),e.jsx(p,{children:[{value:"recently_added",label:"Më të fundit të shtuar"},{value:"price_low",label:"Çmimi: Nga më i ulet"},{value:"price_high",label:"Çmimi: Nga më i larti"},{value:"year_new",label:"Viti: Nga më i ri"},{value:"year_old",label:"Viti: Nga më i vjetri"},{value:"mileage_low",label:"Kilometrazhi: Nga më i ulet"},{value:"mileage_high",label:"Kilometrazhi: Nga më i larti"},{value:"make_az",label:"Marka: A-Z"},{value:"make_za",label:"Marka: Z-A"},{value:"popular",label:"Më të popullurit"}].map(a=>e.jsx(g,{value:a.value,children:a.label},a.value))})]})})}),f?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8 px-2 sm:px-0 stagger-animation",children:[...Array(8)].map((a,s)=>e.jsxs("div",{className:"modern-card p-4 pulse-enhanced",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-muted via-muted/50 to-muted rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-muted via-muted/50 to-muted rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-muted via-muted/50 to-muted rounded w-3/4"})]},s))}):0===de.length?e.jsx("div",{className:"text-center py-8 sm:py-12 px-4",children:e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-4",children:"Nuk ka makina të disponueshme."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8 px-2 sm:px-0 "+(i?"stagger-animation":""),children:ue.map(s=>{const t=s.lots?.[0],r=t?.buy_now||25e3,l=k(Math.round(r+2200));return e.jsx(a,{id:s.id,make:s.manufacturer?.name||"Unknown",model:s.model?.name||"Unknown",year:s.year,price:l,image:t?.images?.normal?.[0]||t?.images?.big?.[0],vin:s.vin,mileage:t?.odometer?.km?`${t.odometer.km.toLocaleString()} km`:void 0,transmission:s.transmission?.name,fuel:s.fuel?.name,color:s.color?.name,condition:s.condition?.replace("run_and_drives","Good"),lot:s.lot_number||t?.lot,title:s.title,status:Number(s.status||t?.status||1),sale_status:s.sale_status||t?.sale_status,final_price:s.final_price||t?.final_price,insurance_v2:t?.insurance_v2,details:t?.details},s.id)})}),e.jsx("div",{className:"text-center mt-8",children:de.length>50&&!T&&e.jsxs(l,{onClick:()=>V(!0),variant:"outline",size:"lg",className:"btn-enhanced bg-card border-primary text-primary hover:bg-primary hover:text-primary-foreground px-8 py-3",children:["Shiko të gjitha (",de.length," makina)"]})})]})]})})});Q.displayName="HomeCarsSection";export{Q as default};
