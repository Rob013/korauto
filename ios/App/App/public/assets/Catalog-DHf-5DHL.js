const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Footer-DRRobR63.js","assets/ui-5CGx59HE.js","assets/vendor-Ce2S7JN_.js","assets/router-CrtsEgIx.js","assets/phone-hADAJvIR.js","assets/index-DXJv48IP.js","assets/supabase-FBsvvB2P.js","assets/utils-DN5cgeP9.js","assets/query-D7el4M-V.js","assets/index-CQ5W8qV3.css","assets/map-pin-k_93RLhL.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase-FBsvvB2P.js";import{j as s}from"./ui-5CGx59HE.js";import{r as a}from"./vendor-Ce2S7JN_.js";import{u as l}from"./router-CrtsEgIx.js";import{t as r}from"./analytics-DNqrEujd.js";import i from"./Header-CbL792xF.js";import{c as t,u as c,B as m,X as d,S as n}from"./index-DXJv48IP.js";import{I as o}from"./input-BjLg3enW.js";import{B as h}from"./badge-CtAh7DWu.js";import{S as x,a as j,A as u,b as p,c as g,d as v}from"./select-BjugpQxa.js";import{L as f}from"./LazyCarCard-PNibhy4Q.js";import{f as N}from"./carsApi-CWjCMvhU.js";import{u as y}from"./useCurrencyAPI-4V5PeEfF.js";import{S as b}from"./search-b9WDS7dH.js";import{L as k}from"./loader-circle-Cz5GAv8d.js";import"./client-ClhMjqWB.js";import"./heart-j_9DbFLM.js";import"./user-CjHCORYF.js";import"./utils-DN5cgeP9.js";import"./query-D7el4M-V.js";import"./chevron-down-CZttC9Jd.js";import"./check-DVisVKU7.js";import"./chevron-up-BDNiUINz.js";import"./useImageSwipe-D5MjfpnV.js";import"./camera-Dgez-INn.js";import"./car-BxrBaIAr.js";import"./gauge-C77d0s-O.js";import"./settings-CifkK-3H.js";import"./palette-CnXSA3iB.js";import"./shield-2CMa0t69.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=t("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),w=t("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]),M=[{value:"price_asc",label:"Price: Low to High"},{value:"price_desc",label:"Price: High to Low"},{value:"year_desc",label:"Year: Newest First"},{value:"year_asc",label:"Year: Oldest First"},{value:"mileage_asc",label:"Mileage: Low to High"},{value:"mileage_desc",label:"Mileage: High to Low"},{value:"make_asc",label:"Make: A to Z"},{value:"make_desc",label:"Make: Z to A"}],S=({highlightCarId:e,className:l=""})=>{const{toast:r}=c(),{convertUSDtoEUR:i}=y(),[t,n]=a.useState([]),[S,_]=a.useState(!0),[L,A]=a.useState(null),[P,F]=a.useState(0),[E,I]=a.useState("price_asc"),[H,$]=a.useState(!1),[O,z]=a.useState(),[B,Y]=a.useState(!1),[q,D]=a.useState({}),[R,T]=a.useState(""),U=a.useCallback(async(e=!1,s)=>{try{e?Y(!0):(_(!0),A(null));const a=await N({filters:{...q,...R?{search:R}:{}},sort:E,limit:24,cursor:s});e?n(e=>[...e,...a.items]):(n(a.items),F(a.total)),z(a.nextCursor)}catch(a){A("Failed to load cars. Please try again."),r({title:"Error",description:"Failed to load cars. Please try again.",variant:"destructive"})}finally{_(!1),Y(!1)}},[q,R,E,r]);a.useEffect(()=>{U()},[E,q,R]);const V=a.useCallback(e=>{I(e),z(void 0)},[]),G=a.useCallback(e=>{T(e),z(void 0)},[]),Q=a.useCallback((e,s)=>{D(a=>({...a,[e]:s||void 0})),z(void 0)},[]),W=a.useCallback(()=>{D({}),T(""),z(void 0)},[]),Z=a.useCallback(()=>{O&&!B&&U(!0,O)},[O,B,U]),J=Object.keys(q).some(e=>void 0!==q[e])||R;return s.jsx("div",{className:`min-h-screen bg-background ${l}`,children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center mb-6",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(o,{placeholder:"Search cars...",value:R,onChange:e=>G(e.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(m,{variant:"outline",onClick:()=>$(!H),className:"flex items-center gap-2",children:[H?s.jsx(C,{className:"h-4 w-4"}):s.jsx(w,{className:"h-4 w-4"}),"Filters",J&&s.jsx(h,{variant:"secondary",className:"ml-1",children:"Active"})]}),s.jsxs(x,{value:E,onValueChange:V,children:[s.jsxs(j,{className:"w-48",children:[s.jsx(u,{className:"h-4 w-4 mr-2"}),s.jsx(p,{})]}),s.jsx(g,{children:M.map(e=>s.jsx(v,{value:e.value,children:e.label},e.value))})]}),J&&s.jsxs(m,{variant:"outline",onClick:W,className:"flex items-center gap-2",children:[s.jsx(d,{className:"h-4 w-4"}),"Clear"]})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:S?"Loading...":`${P.toLocaleString()} cars found • Globally sorted by ${M.find(e=>e.value===E)?.label}`})}),s.jsxs("div",{className:"flex gap-6",children:[H&&s.jsx("div",{className:"w-80 space-y-4",children:s.jsxs("div",{className:"glass-card p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Quick Filters"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Make"}),s.jsx(o,{placeholder:"e.g. BMW, Audi",value:q.make||"",onChange:e=>Q("make",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Model"}),s.jsx(o,{placeholder:"e.g. A4, X3",value:q.model||"",onChange:e=>Q("model",e.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Min Year"}),s.jsx(o,{type:"number",placeholder:"2010",value:q.yearMin||"",onChange:e=>Q("yearMin",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Max Year"}),s.jsx(o,{type:"number",placeholder:"2024",value:q.yearMax||"",onChange:e=>Q("yearMax",e.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Min Price (€)"}),s.jsx(o,{type:"number",placeholder:"5000",value:q.priceMin||"",onChange:e=>Q("priceMin",e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Max Price (€)"}),s.jsx(o,{type:"number",placeholder:"50000",value:q.priceMax||"",onChange:e=>Q("priceMax",e.target.value)})]})]})]})]})}),s.jsx("div",{className:"flex-1",children:S&&0===t.length?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(k,{className:"h-8 w-8 animate-spin"})}):L?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-destructive",children:L}),s.jsx(m,{onClick:()=>U(),className:"mt-4",children:"Try Again"})]}):0===t.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"No cars found matching your criteria."})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(e=>s.jsx(f,{id:e.id,make:e.make,model:e.model,year:e.year,price:i(e.price_cents?Math.round(e.price_cents/100):e.price||25e3),image:e.images?.[0],images:e.images,mileage:e.mileage,transmission:e.transmission,fuel:e.fuel,color:e.color,lot:e.id,title:e.title||`${e.make} ${e.model} ${e.year}`},e.id))}),O&&s.jsx("div",{className:"flex justify-center mt-8",children:s.jsx(m,{onClick:Z,disabled:B,className:"flex items-center gap-2",children:B?s.jsxs(s.Fragment,{children:[s.jsx(k,{className:"h-4 w-4 animate-spin"}),"Loading More..."]}):"Load More Cars"})})]})})]})]})})},_=a.lazy(()=>e(()=>import("./Footer-DRRobR63.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),L=()=>s.jsx("footer",{className:"bg-card",children:s.jsx("div",{className:"container-responsive py-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[...Array(4)].map((e,a)=>s.jsxs("div",{className:"space-y-3",children:[s.jsx(n,{className:"h-5 w-24"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(n,{className:"h-4 w-full"}),s.jsx(n,{className:"h-4 w-3/4"}),s.jsx(n,{className:"h-4 w-1/2"})]})]},a))})})}),A=()=>{const[e]=l(),t=e.get("highlight");return a.useEffect(()=>{r(void 0,{page_type:"catalog",highlighted_car:t})},[t]),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(i,{}),s.jsx(S,{highlightCarId:t}),s.jsx(a.Suspense,{fallback:s.jsx(L,{}),children:s.jsx(_,{})})]})};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{A as default};
