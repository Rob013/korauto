import{j as e}from"./ui-5CGx59HE.js";import{r as s}from"./vendor-Ce2S7JN_.js";import{c as a,u as i,B as r,C as t,e as l,f as n,b as o}from"./index-DXJv48IP.js";import{I as m}from"./input-BjLg3enW.js";import{L as c}from"./label-CADau4dH.js";import{s as d}from"./client-ClhMjqWB.js";import{b as j}from"./router-CrtsEgIx.js";import{L as u}from"./log-out-D_YGK74m.js";import{U as h}from"./user-CjHCORYF.js";import{S as x}from"./settings-CifkK-3H.js";import{S as p}from"./shield-2CMa0t69.js";import"./supabase-FBsvvB2P.js";import"./utils-DN5cgeP9.js";import"./query-D7el4M-V.js";import"./ui-form-bTH_Yx3M.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=a("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),g=()=>{const a=j(),{toast:g}=i(),[N,b]=s.useState(null),[v,y]=s.useState(null),[w,k]=s.useState(!1),[S,D]=s.useState(!0),[P,C]=s.useState("");s.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:{user:e}}=await d.auth.getUser();if(!e)return void a("/auth");b(e);const s="0013rob@gmail.com"===e.email;k(s);const{data:i}=await d.from("profiles").select("*").eq("id",e.id).maybeSingle();i&&(y(i),C(i.display_name||""))}catch(e){}finally{D(!1)}};return S?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Po ngarkohet llogaria juaj..."})]})}):N?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container-responsive py-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Llogaria Ime"}),e.jsx("p",{className:"text-muted-foreground",children:"Menaxhoni informacionet e llogarisë suaj"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",onClick:()=>a("/"),children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Kryefaqja"]}),e.jsxs(r,{variant:"outline",onClick:async()=>{await d.auth.signOut(),g({title:"U Dolët",description:"U dolët me sukses nga llogaria juaj"}),a("/")},children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Dilni"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(t,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),"Informacionet e Profilit"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",value:N.email,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"displayName",children:"Emri për Shfaqje"}),e.jsx(m,{id:"displayName",value:P,onChange:e=>C(e.target.value),placeholder:"Shkruani emrin tuaj për shfaqje"})]}),e.jsxs(r,{onClick:async()=>{if(N)try{const{error:e}=await d.from("profiles").upsert({id:N.id,display_name:P,email:N.email,updated_at:(new Date).toISOString()});if(e)throw e;g({title:"Profili u përditësua",description:"Profili juaj u përditësua me sukses"})}catch(e){g({title:"Gabim",description:"Dështoi përditësimi i profilit",variant:"destructive"})}},className:"w-full",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Përditëso Profilin"]})]})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-primary"}),"Veprimet e Llogarisë"]})}),e.jsxs(o,{className:"space-y-4",children:[w&&e.jsxs("div",{className:"p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-primary mb-2 flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"Administratori"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Ju keni privilegje administratori për këtë aplikacion."}),e.jsxs(r,{onClick:()=>a("/admin"),className:"w-full bg-primary hover:bg-primary/90",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Paneli i Administratorit"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Veprime të Shpejta"}),e.jsx(r,{variant:"outline",onClick:()=>a("/favorites"),className:"w-full",children:"Shikoni Makinat e Preferuara"}),e.jsx(r,{variant:"outline",onClick:()=>a("/catalog"),className:"w-full",children:"Shfletoni Makinat"})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Informacionet e Llogarisë"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Krijuar: ",new Date(N.created_at).toLocaleDateString()]}),e.jsxs("p",{children:["Kyçja e Fundit: ",new Date(N.last_sign_in_at||N.created_at).toLocaleDateString()]}),v&&e.jsxs("p",{children:["Profili u Përditësua: ",new Date(v.updated_at).toLocaleDateString()]})]})]})]})]})]})]})}):null};export{g as default};
